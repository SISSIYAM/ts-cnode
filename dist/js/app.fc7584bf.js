(function(t){function e(e){for(var a,c,r=e[0],o=e[1],u=e[2],p=0,d=[];p<r.length;p++)c=r[p],i[c]&&d.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var o=n[r];0!==i[o]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},s=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"026b":function(t,e,n){"use strict";var a=n("77eb"),i=n.n(a);i.a},"02a0":function(t,e,n){},"0a8c":function(t,e,n){},"16c5":function(t,e,n){"use strict";var a=n("5b7d"),i=n.n(a);i.a},"1cc0":function(t,e,n){"use strict";var a=n("f66a"),i=n.n(a);i.a},"20c8":function(t,e,n){},"26e2":function(t,e,n){},2856:function(t,e,n){},"2d9f":function(t,e,n){},"2eff":function(t,e,n){},3343:function(t,e,n){},"34d7":function(t,e,n){"use strict";var a=n("dacc"),i=n.n(a);i.a},"3b2a":function(t,e,n){"use strict";var a=n("0a8c"),i=n.n(a);i.a},"3e69":function(t,e,n){},"438d":function(t,e,n){},"48b8":function(t,e,n){},"4a09":function(t,e,n){},"4dc5":function(t,e,n){"use strict";var a=n("af12"),i=n.n(a);i.a},"51b3":function(t,e,n){"use strict";var a=n("3e69"),i=n.n(a);i.a},5442:function(t,e,n){"use strict";var a=n("438d"),i=n.n(a);i.a},"5b7d":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("2856"),i=n.n(a);i.a},"5e3f":function(t,e,n){"use strict";var a=n("2eff"),i=n.n(a);i.a},"5f5b":function(t,e,n){"use strict";var a=n("48b8"),i=n.n(a);i.a},6641:function(t,e,n){"use strict";var a=n("20c8"),i=n.n(a);i.a},"6aec":function(t,e,n){"use strict";var a=n("02a0"),i=n.n(a);i.a},"6f07":function(t,e){},7514:function(t,e,n){},"77eb":function(t,e,n){},"7ea8":function(t,e,n){"use strict";var a=n("b77a"),i=n.n(a);i.a},8331:function(t,e,n){"use strict";var a=n("7514"),i=n.n(a);i.a},"8a8f":function(t,e,n){"use strict";var a=n("dee0"),i=n.n(a);i.a},a492:function(t,e,n){},a775:function(t,e,n){"use strict";var a=n("b194"),i=n.n(a);i.a},af12:function(t,e,n){},b0ee:function(t,e,n){"use strict";var a=n("4a09"),i=n.n(a);i.a},b194:function(t,e,n){},b3a8:function(t,e,n){"use strict";var a=n("a492"),i=n.n(a);i.a},b77a:function(t,e,n){},bed9:function(t,e,n){"use strict";var a=n("da3a"),i=n.n(a);i.a},c5c6:function(t,e,n){"use strict";var a=n("3343"),i=n.n(a);i.a},cc79:function(t,e,n){"use strict";var a=n("ffad"),i=n.n(a);i.a},cd49:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"state",function(){return Tn}),n.d(a,"actions",function(){return Cn}),n.d(a,"mutations",function(){return kn}),n.d(a,"getters",function(){return xn});var i={};n.r(i),n.d(i,"state",function(){return Fn}),n.d(i,"actions",function(){return Dn}),n.d(i,"mutations",function(){return Gn}),n.d(i,"getters",function(){return Wn});var s={};n.r(s),n.d(s,"home",function(){return Si}),n.d(s,"details",function(){return Ii}),n.d(s,"user",function(){return $i}),n.d(s,"edit",function(){return Ei});n("cadf"),n("551c"),n("097d");var c=n("2b0e"),r=(n("ac6a"),n("a70e")),o=n.n(r),u=n("4dd1"),l=n.n(u);n("9f21");o.a.registerLanguage("javascript",l.a),c["default"].directive("highlight",function(t){var e=t.querySelectorAll("pre code");e.length&&e.forEach(function(t){o.a.highlightBlock(t)})});var p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},d=[],b=(n("a481"),n("c665")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"wu-imgView",on:{click:function(e){t.show=!1}}},[n("img",{attrs:{src:t.src}})]):t._e()},v=[],h=n("dc0a"),_=n("aa9a"),m=n("d328"),g=n("11d9"),O=n("9ab4"),j=n("60a3"),y=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.$nextTick(function(){t.$el.scrollLeft=(t.$el.scrollWidth-t.$el.clientWidth)/2})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],y.prototype,"src",void 0),y=O["a"]([j["a"]],y);var w=y,T=w,C=(n("a775"),n("2877")),k=Object(C["a"])(T,f,v,!1,null,null,null);k.options.__file="img-view.vue";var x=k.exports,S=c["default"].extend(x),I=document.createElement("div"),$=function t(e){Object(b["a"])(this,t),document.body.appendChild(new S({el:I,propsData:{src:e}}).$el)},E=function(t){return new $(t)},R=function(){document.querySelector("#app").addEventListener("click",function(t){var e=t||window.event,n=e.target;if("a"===n.nodeName.toLowerCase()&&~n.textContent.indexOf("@")){var a=n.textContent.replace("@","");t.preventDefault(),window.location.href="".concat(window.location.origin).concat(window.location.pathname,"#/user/").concat(a)}"img"===n.nodeName.toLowerCase()&&E(n.currentSrc)})},N={mounted:function(){R()}},L=N,U=(n("5c0b"),Object(C["a"])(L,p,d,!1,null,null,null));U.options.__file="App.vue";var A=U.exports,H=n("8c4f"),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("tab-container",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},[n("tab-container-item",{attrs:{id:"home"}},[n("home")],1),n("tab-container-item",{attrs:{id:"edit"}},[n("edit")],1),n("tab-container-item",{attrs:{id:"user"}},["user"===t.tabbar?n("login"):t._e()],1),n("tab-container-item",{attrs:{id:"message"}},["message"===t.tabbar?n("message"):t._e()],1)],1),n("tab-bar",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},t._l(t.tabbars,function(e){return n("tab-bar-tab",{key:e.id,attrs:{id:e.id}},[n("Icon",{attrs:{slot:"icon",type:e.id},slot:"icon"}),t._v(t._s(e.value)+"\n    ")],1)}))],1)},P=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className},[t._t("default")],2)},B=[],F="wu-tabbar",D=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(F),"".concat(F,"-").concat(this.tabbarPosition)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])({default:"bottom"}),O["b"]("design:type",String)],D.prototype,"tabbarPosition",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],D.prototype,"value",void 0),D=O["a"]([j["a"]],D);var G=D,W=G,J=(n("cc79"),Object(C["a"])(W,q,B,!1,null,null,null));J.options.__file="index.vue";var Q=J.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.tabbarTabCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("div",{staticClass:"wu-tabbar-tab-icon"},[t._t("icon")],2),n("div",{staticClass:"wu-tabbar-tab-title"},[t._t("default")],2)])},V=[],Y=n("a322"),z="wu-tabbar-tab",K=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"tabbarTabCls",get:function(){return["".concat(z),Object(Y["a"])({},"".concat(z,"-is-selected"),this.$parent.value===this.id)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],K.prototype,"id",void 0),K=O["a"]([j["a"]],K);var Z=K,tt=Z,et=(n("026b"),Object(C["a"])(tt,X,V,!1,null,null,null));et.options.__file="index.vue";var nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:t.className})},it=[],st="iconfont",ct=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(st),"icon-".concat(this.type)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],ct.prototype,"type",void 0),ct=O["a"]([j["a"]],ct);var rt=ct,ot=rt,ut=Object(C["a"])(ot,at,it,!1,null,null,null);ut.options.__file="index.vue";var lt=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tab-container",on:{scroll:t.handlerScroll}},[t._t("default")],2)},dt=[],bt=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){this.$emit("scroll",t)}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],bt.prototype,"value",void 0),bt=O["a"]([j["a"]],bt);var ft=bt,vt=ft,ht=(n("b0ee"),Object(C["a"])(vt,pt,dt,!1,null,null,null));ht.options.__file="index.vue";var _t=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.id===t.$parent.value,expression:"id === $parent.value"}],staticClass:"wu-tab-container-item"},[t._t("default")],2)},gt=[],Ot=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Ot.prototype,"id",void 0),Ot=O["a"]([j["a"]],Ot);var jt=Ot,yt=jt,wt=(n("b3a8"),Object(C["a"])(yt,mt,gt,!1,null,null,null));wt.options.__file="index.vue";var Tt=wt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-home"},[n("nav-bar",[t._v("\n    首页\n  ")]),n("div",{staticClass:"content"},[n("tabs",{model:{value:t.topicsTab,callback:function(e){t.topicsTab=e},expression:"topicsTab"}},t._l(t.topicTabs,function(e){return n("tabs-item",{key:e.id,attrs:{id:e.id}},[t._v(t._s(e.value))])})),n("tab-container",{ref:"topicsContent",staticClass:"topics__item",on:{scroll:t.handlerScroll}},t._l(t.topics,function(e,a){return n("tab-container-item",{key:a,staticClass:"tab__container__item"},[n("router-link",{attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)],1)}))],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.topicsContent.$el.scrollTop=0}}})],1)},kt=[],xt=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-navbar"},[n("div",{staticClass:"wu-navbar-left",on:{click:function(e){t.$emit("leftClick")}}},[t._t("left")],2),n("div",{staticClass:"wu-navbar-content"},[t._t("default")],2),n("div",{staticClass:"wu-navbar-right",on:{click:function(e){t.$emit("rightClick")}}},[t._t("right")],2)])}),St=[],It=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);It=O["a"]([j["a"]],It);var $t=It,Et=$t,Rt=(n("4dc5"),Object(C["a"])(Et,xt,St,!1,null,null,null));Rt.options.__file="index.vue";var Nt=Rt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tabs"},[t._t("default")],2)},Ut=[],At=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],At.prototype,"value",void 0),At=O["a"]([j["a"]],At);var Ht=At,Mt=Ht,Pt=(n("6641"),Object(C["a"])(Mt,Lt,Ut,!1,null,null,null));Pt.options.__file="index.vue";var qt=Pt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[t._t("default")],2)},Ft=[],Dt="wu-tabs-item",Gt=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(Dt),Object(Y["a"])({},"".concat(Dt,"-selected"),this.id===this.$parent.value)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Gt.prototype,"id",void 0),Gt=O["a"]([j["a"]],Gt);var Wt=Gt,Jt=Wt,Qt=(n("e0e8"),Object(C["a"])(Jt,Bt,Ft,!1,null,null,null));Qt.options.__file="index.vue";var Xt=Qt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"topics__card"},[n("div",{staticClass:"topics__item__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"topics__item-avatar",attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"topics__item__header__container"},[n("div",{staticClass:"topics__item__header__container-nickname"},[t._v(t._s(t.topics.author.loginname))]),t.topics.top?n("Icon",{attrs:{type:"hot"}}):t._e(),t.topics.good?n("Icon",{attrs:{type:"good"}}):t._e(),n("div",{staticClass:"topics__item__header__container-text"},[t._v(t._s(t.topicsHeaderText))])],1)]),n("div",{staticClass:"topics__item__body",attrs:{slot:"body"},slot:"body"},[t._v("\n    "+t._s(t.topics.title)+"\n  ")]),n("div",{staticClass:"topics__item__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",[n("Icon",{attrs:{type:"chakan"}}),t._v(t._s(t.topics.visit_count)+" ")],1),n("div",[n("Icon",{attrs:{type:"comment"}}),t._v(t._s(t.topics.reply_count))],1),n("div",{staticClass:"topics__item__footer-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])},Yt=[],zt=n("e8e8");function Kt(t){var e=(new Date).getTime()-new Date(t).getTime(),n=Math.floor(e/864e5),a=e%864e5,i=Math.floor(a/36e5),s=a%36e5,c=Math.floor(s/6e4),r=s%6e4,o=Math.round(r/1e3);return 0!==n?n>365?"".concat(Math.floor(n/365),"年前"):n>30?"".concat(Math.floor(n/30),"月前"):n<0?"刚刚":"".concat(n,"天前"):0!==i?"".concat(i,"小时前"):0!==c?"".concat(c,"分钟前"):0!==o?"".concat(o,"秒前"):0===o?"刚刚":void 0}function Zt(t){switch(t){case"share":return"分享";case"ask":return"问答";case"good":return"精华";case"job":return"招聘";default:return""}}var te={methods:{ago:Kt,getTab:Zt}},ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-card"},[n("div",{staticClass:"wu-card-container"},[n("div",{staticClass:"wu-card__header"},[t._t("header")],2),n("div",{staticClass:"wu-card__body"},[t._t("body")],2),n("div",{staticClass:"wu-card__footer"},[t._t("footer")],2)])])},ne=[],ae=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);ae=O["a"]([j["a"]],ae);var ie=ae,se=ie,ce=(n("bed9"),Object(C["a"])(se,ee,ne,!1,null,null,null));ce.options.__file="index.vue";var re,oe=ce.exports,ue=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"topicsHeaderText",get:function(){return"".concat(this.ago(this.topics.create_at),"发布至").concat(this.getTab(this.topics.tab))}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(re="undefined"!==typeof zt["TopicInfo"]&&zt["TopicInfo"])?re:Object)],ue.prototype,"topics",void 0),ue=O["a"]([Object(j["a"])({components:{Card:oe,Icon:lt},mixins:[te]})],ue);var le=ue,pe=le,de=(n("3b2a"),Object(C["a"])(pe,Vt,Yt,!1,null,null,null));de.options.__file="index.vue";var be,fe=de.exports,ve="REQUEST__TOPICS",he="REQUEST__TOPIC__DETAILS",_e="TOPICS__CHANGE__TAB",me="CHANGE__TABBAR",ge="SET__TOPICS__SCROLL",Oe="SET__TOPIC__SCROLL",je="CHANGE__COLLECT",ye=n("4bb5"),we=function(t,e){return window.localStorage.setItem(t,e)},Te=function(t){return window.localStorage.getItem(t)},Ce=function(t,e){return document.querySelector(t)[e]},ke=function(t){return t.reduce(function(t,e){return t+Ce(e,"clientHeight")},0)},xe=function(t,e,n){return document.querySelector(t).setAttribute(e,n)},Se=document.documentElement.clientHeight,Ie=[{id:"all",value:"全部"},{id:"good",value:"精华"},{id:"share",value:"分享"},{id:"ask",value:"问答"},{id:"job",value:"招聘"}],$e=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.page=1,t.contentHeight=0,t.showTop=!1,t.currentScrollTop=0,t.topicTabs=Ie,t}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){var e=t.srcElement,n=e.clientHeight,a=e.scrollTop,i=e.scrollHeight;this.currentScrollTop=a;var s=i-a===n;this.showTop=a>400,s&&this.topics.length&&++this.page&&this.requestTopics({tab:this.topicsTab,page:this.page})}},{key:"mounted",value:function(){!this.topics.length&&this.requestTopics(),this.init(),this.$refs.topicsContent.$el.scrollTop=this.scroll}},{key:"init",value:function(){var t=[".wu-tabbar",".wu-navbar",".wu-tabs"],e=Se-ke(t);this.$refs.topicsContent.$el.setAttribute("style","height:".concat(e,"px"))}},{key:"beforeDestroy",value:function(){this.setTopicsScroll(this.currentScrollTop)}},{key:"topicsTab",get:function(){return this.currentTab},set:function(t){this.page=1,this.topicsChangeTab(t),this.requestTopics({tab:t,page:1})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(ye["a"])(ve),O["b"]("design:type",Function)],$e.prototype,"requestTopics",void 0),O["a"]([Object(ye["a"])(_e),O["b"]("design:type",Function)],$e.prototype,"topicsChangeTab",void 0),O["a"]([Object(ye["a"])(ge),O["b"]("design:type",Function)],$e.prototype,"setTopicsScroll",void 0),O["a"]([Object(ye["b"])(function(t){return t.topics.topics}),O["b"]("design:type","function"===typeof(be="undefined"!==typeof Array&&Array)?be:Object)],$e.prototype,"topics",void 0),O["a"]([Object(ye["b"])(function(t){return t.topics.topicsScroll}),O["b"]("design:type",Number)],$e.prototype,"scroll",void 0),O["a"]([Object(ye["b"])(function(t){return t.topics.currentTab}),O["b"]("design:type",String)],$e.prototype,"currentTab",void 0),$e=O["a"]([Object(j["a"])({components:{TabContainer:_t,TabContainerItem:Tt,NavBar:Nt,Tabs:qt,TabsItem:Xt,TopicsCard:fe},inject:["path"]})],$e);var Ee=$e,Re=Ee,Ne=(n("34d7"),Object(C["a"])(Re,Ct,kt,!1,null,null,null));Ne.options.__file="index.vue";var Le=Ne.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-edit"},[n("nav-bar",{on:{rightClick:t.handlerSubmit}},[t._v("新建主题\n    "),n("span",{attrs:{slot:"right"},slot:"right"},[t._v("发布")])]),n("div",{staticClass:"wu-edit-container"},[n("div",{staticClass:"wu-edit-container__title"},[n("icon",{attrs:{type:"title"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__content"},[n("icon",{attrs:{type:"content"}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"30",rows:"5",placeholder:"请输入内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__tab"},[n("icon",{attrs:{type:"classify"}}),n("span",{staticClass:"wu-edit-container__tab-title"},[t._v("选择分类")])],1),n("Labels",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("label-item",{attrs:{id:"share",label:"分享"}}),n("label-item",{attrs:{id:"ask",label:"问答"}}),n("label-item",{attrs:{id:"job",label:"招聘"}}),n("label-item",{attrs:{id:"dev",label:"开发"}})],1)],1)],1)},Ae=[],He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-label"},[t._t("default")],2)},Me=[],Pe=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Pe.prototype,"value",void 0),Pe=O["a"]([j["a"]],Pe);var qe=Pe,Be=qe,Fe=Object(C["a"])(Be,He,Me,!1,null,null,null);Fe.options.__file="index.vue";var De=Fe.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.labelItemCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("span",[t._v(t._s(t.label))])])},We=[],Je="wu-label-item",Qe=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"labelItemCls",get:function(){return["".concat(Je),Object(Y["a"])({},"".concat(Je,"-selected"),this.$parent.value===this.id)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Qe.prototype,"id",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Qe.prototype,"label",void 0),Qe=O["a"]([j["a"]],Qe);var Xe=Qe,Ve=Xe,Ye=(n("c5c6"),Object(C["a"])(Ve,Ge,We,!1,null,null,null));Ye.options.__file="index.vue";var ze=Ye.exports,Ke=(n("f751"),n("bc3a")),Ze=n.n(Ke),tn="https://cnodejs.org/api/v1/",en={},nn=["Null","Array","String","Object","Number","Boolean","Function","Undefined"];nn.map(function(t){return en["is".concat(t)]=function(e){return toString.call(e)==="[object ".concat(t,"]")}});var an=en,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toast"}},[t.show?n("div",{class:t.toast},[t.icon?n("div",{class:t.iconCls}):t._e(),n("div",{staticClass:"wu-toast-content"},[t._v("\n      "+t._s(t.message)+"\n    ")])]):t._e()])},cn=[],rn="wu-toast",on=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.duration>0&&setTimeout(function(){t.show=!t.show},this.duration)}},{key:"iconCls",get:function(){return["iconfont",Object(Y["a"])({},"icon-".concat(this.icon),this.icon)]}},{key:"toast",get:function(){return["".concat(rn),"".concat(rn,"-").concat(this.position)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],on.prototype,"message",void 0),O["a"]([Object(j["b"])({default:3e3}),O["b"]("design:type",Number)],on.prototype,"duration",void 0),O["a"]([Object(j["b"])({default:""}),O["b"]("design:type",String)],on.prototype,"icon",void 0),O["a"]([Object(j["b"])({default:"center"}),O["b"]("design:type",String)],on.prototype,"position",void 0),on=O["a"]([Object(j["a"])({components:{Icon:lt}})],on);var un=on,ln=un,pn=(n("5f5b"),Object(C["a"])(ln,sn,cn,!1,null,null,null));pn.options.__file="toast.vue";var dn,bn,fn,vn,hn=pn.exports,_n=c["default"].extend(hn),mn=document.createElement("div"),gn=function(t){return an.isObject(t)?t:{message:t}},On=function(){function t(){Object(b["a"])(this,t),this.queue=[]}return Object(_["a"])(t,[{key:"createToast",value:function(t){var e=gn(t),n=new _n({el:mn,propsData:e});return document.body.appendChild(n.$el),this.queue.push(n),this.queue[this.queue.length-1]}},{key:"show",value:function(t){return this.createToast(t)}},{key:"hide",value:function(){this.queue[this.queue.length-1].show=!1,this.queue.pop()}},{key:"clearAll",value:function(){this.queue.map(function(t){return t.show=!1}),this.queue=[]}},{key:"loading",value:function(t){return this.createToast({icon:"loading",message:t,duration:0})}}]),t}(),jn=new On,yn=n("2f62"),wn=(n("96cf"),n("3040")),Tn={currentTab:"all",tabbar:"home",topics:[],openTopics:[],topicsScroll:0},Cn=(dn={},Object(Y["a"])(dn,ve,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e){var n,a,i,s,c,r,o,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=u.length>1&&void 0!==u[1]?u[1]:{},i=a.tab,s=void 0===i?"all":i,c=a.page,r=void 0===c?1:c,t.next=5,zn(s,r);case 5:o=t.sent,n(ve,o);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(Y["a"])(dn,_e,function(t,e){var n=t.commit;n(_e,e)}),Object(Y["a"])(dn,me,function(t,e){var n=t.commit;n(me,e)}),Object(Y["a"])(dn,he,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Kn(n);case 3:i=t.sent,i=Object.assign({},i,{scroll:0}),a(he,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(dn,ge,function(t,e){var n=t.commit;n(ge,e)}),Object(Y["a"])(dn,Oe,function(t,e){var n=t.commit;n(Oe,e)}),Object(Y["a"])(dn,je,function(t,e){var n=t.commit;n(je,e)}),dn),kn=(bn={},Object(Y["a"])(bn,ve,function(t,e){t.topics=t.topics.concat(e)}),Object(Y["a"])(bn,_e,function(t,e){t.currentTab=e,t.topics=[],t.topicsScroll=0}),Object(Y["a"])(bn,me,function(t,e){t.tabbar=e}),Object(Y["a"])(bn,he,function(t,e){var n=!1;t.openTopics.map(function(t){return t.id===e.id&&(n=!0)&&(t.replies=e.replies)}),!n&&t.openTopics.push(e)}),Object(Y["a"])(bn,ge,function(t,e){t.topicsScroll=e}),Object(Y["a"])(bn,Oe,function(t,e){t.openTopics.map(function(t){t.id===e.id&&(t.scroll=e.scroll)})}),Object(Y["a"])(bn,je,function(t,e){e.result&&t.openTopics.map(function(t){return t.id===e.topic&&(t.is_collect=!t.is_collect)})}),bn),xn={},Sn=function(t){return Vn("user/".concat(t)).then(function(t){return t.data.data})},In=function(t){return Vn("topic_collect/".concat(t)).then(function(t){return t.data.data})},$n=function(t){return Yn("topic_collect/collect",t).then(function(t){return t.data.success})},En=function(t){return Yn("topic_collect/de_collect",t).then(function(t){return t.data.success})},Rn=function(t){return Yn("accesstoken",{accesstoken:t}).then(function(t){return t.data})},Nn=function(t){return Vn("messages",{accesstoken:t}).then(function(t){var e=t.data.data,n=e.has_read_messages,a=e.hasnot_read_messages;return a.concat(n)})},Ln=function(){return Yn("message/mark_all").then(function(t){return t.data})},Un="GET__USER__INFO",An="CHANGE__USER__TAB",Hn="UPDATE__USER__SCROLL",Mn="USER__LOGIN",Pn="USER__LOGOUT",qn="GET__MY__MESSAGE",Bn="GET__USER__COLLECT",Fn={localToken:Te("accessToken"),accessToken:"",users:[],tab:"replies",scroll:0,loginname:"",avatar_url:"",id:"",message:[]},Dn=(fn={},Object(Y["a"])(fn,Un,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Sn(n);case 3:i=t.sent,i["collect"]=[],a(Un,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(fn,An,function(t,e){var n=t.commit;n(An,e)}),Object(Y["a"])(fn,Hn,function(t,e){var n=t.commit;n(Hn,e)}),Object(Y["a"])(fn,Mn,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Nn(n.accessToken);case 3:i=t.sent,n.message=i,a(Mn,n);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(fn,Pn,function(t){var e=t.commit;e(Pn)}),Object(Y["a"])(fn,qn,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Nn(n);case 3:i=t.sent,a(qn,i);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(fn,Bn,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,In(n);case 3:i=t.sent,Object.assign(i,{loginname:n}),a(Bn,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),fn),Gn=(vn={},Object(Y["a"])(vn,Un,function(t,e){t.tab="replies",t.scroll=0,t.users.push(e)}),Object(Y["a"])(vn,An,function(t,e){t.tab=e}),Object(Y["a"])(vn,Hn,function(t,e){t.scroll=e}),Object(Y["a"])(vn,Mn,function(t,e){Object.assign(t,e),we("accessToken",e.accessToken),we("loginName",e.loginname)}),Object(Y["a"])(vn,Pn,function(t){t.accessToken="",t.localToken="",t.avatar_url="",t.id="",t.loginname="",t.message=[],we("accessToken",""),we("loginName","")}),Object(Y["a"])(vn,je,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,In(e.loginname||Te("loginName"));case 2:n=t.sent,e.users.length&&(e.users[0]["collect"]=n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(Y["a"])(vn,qn,function(t,e){t.message=e}),Object(Y["a"])(vn,Bn,function(t,e){t.users.map(function(t){return t.loginname===e.loginname&&(t.collect=e)})}),vn),Wn={token:function(t){return t.accessToken},localToken:function(t){return t.localToken}};c["default"].use(yn["a"]);var Jn=new yn["a"].Store({modules:{topics:a,user:i}}),Qn=function(){return Jn.getters.localToken||Jn.getters.token},Xn=Ze.a.create({baseURL:tn,timeout:0,headers:{"X-Requested-With":"XMLHttpRequest"},maxContentLength:2e3});Xn.interceptors.request.use(function(t){var e=!!~t.url.indexOf("topics"),n=!!~t.url.indexOf("accesstoken"),a=t.method;return"get"===a&&!t.params&&Qn()&&(t.params=Object.assign({},t.params,{accesstoken:Qn()})),"post"!==a||n||(t.data=Object.assign({},t.data,{accesstoken:Qn()})),e&&"post"===a?jn.loading("发布中..."):jn.loading("加载中..."),t},function(t){return Promise.reject(t)}),Xn.interceptors.response.use(function(t){return jn.hide(),t},function(t){var e=t.response.data&&t.response.data.error_msg;jn.hide(),jn.show({message:e,duration:5e3})});var Vn=function(t,e){return Xn.get(t,{params:e})},Yn=function(t,e){return Xn.post(t,e)},zn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Vn("topics",{tab:t,page:e,limit:n}).then(function(t){return t.data.data})},Kn=function(t){return Vn("topic/".concat(t)).then(function(t){return t.data.data})},Zn=function(t){return Yn("topics",t).then(function(t){return t.data})},ta=function(t){var e=t.content,n=t.topic_id;return Yn("topic/".concat(n,"/replies"),{content:e}).then(function(t){return t.data})},ea=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tab="dev",t.title="",t.content="",t}return Object(_["a"])(e,[{key:"handlerSubmit",value:function(){var t=this,e=this.title,n=this.tab,a=this.content,i=this.accesstoken,s=[];if(!i)return jn.show("请登录");e||s.push("请输入标题"),a||s.push("请输入内容"),s.length&&jn.show(s.join()),e&&a&&i&&Zn({title:e,tab:n,content:a,accesstoken:i}).then(function(e){return e.success&&t.$router.push({path:"/details/".concat(e.topic_id)})})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(ye["b"])(function(t){return t.user.accessToken}),O["b"]("design:type",String)],ea.prototype,"accesstoken",void 0),ea=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,Labels:De,LabelItem:ze}})],ea);var na=ea,aa=na,ia=(n("5e3f"),Object(C["a"])(aa,Ue,Ae,!1,null,null,null));ia.options.__file="index.vue";var sa,ca=ia.exports,ra=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-login"},[t.user.localToken?[t.user.loginname?n("user",{attrs:{loginname:t.user.loginname,my:"我"}}):t._e()]:[n("nav-bar",[t._v("登录")]),n("div",{staticClass:"wu-login-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accessToken,expression:"accessToken"}],attrs:{type:"text",placeholder:"请输入accessToken"},domProps:{value:t.accessToken},on:{input:function(e){e.target.composing||(t.accessToken=e.target.value)}}}),n("button",{on:{click:t.handlerLogin}},[t._v("登录")])])]],2)},oa=[],ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo.loginname?n("div",{staticClass:"wu-user"},[n("nav-bar",{on:{leftClick:function(e){t.$router.go(-1)},rightClick:t.logout}},[t.my?t._e():n("icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t.my?n("span",{staticClass:"wu-user-logout",attrs:{slot:"right"},slot:"right"},[t._v("注销")]):t._e(),t._v("\n    "+t._s(t.my?t.my:"用户信息")+"\n  ")],1),n("div",{staticClass:"wu-user-container"},[n("div",{staticClass:"wu-user-container__header"},[n("img",{attrs:{src:t.userInfo.avatar_url,alt:""}}),n("div",{staticClass:"wu-user-container__header-info"},[n("div",{staticClass:"wu-user-container__header-nickname"},[t._v(t._s(t.userInfo.loginname))]),n("div",{staticClass:"wu-user-container__header-score"},[t._v(t._s(t.userInfo.score)+"积分")])]),n("span",{staticClass:"wu-user-container__header-time"},[t._v("注册时间"+t._s(t.ago(t.userInfo.create_at))+" ")])]),n("tabs",{model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tabs-item",{attrs:{id:"replies"}},[t._v("参与的话题")]),n("tabs-item",{attrs:{id:"topics"}},[t._v("发布的话题")]),n("tabs-item",{attrs:{id:"collect"}},[t._v("收藏")])],1),n("tab-container",{ref:"content",on:{scroll:t.handerScroll},model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tab-container-item",{staticClass:"wu-user-replies",attrs:{id:"replies"}},[t._l(t.userInfo.recent_replies,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_replies.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),n("tab-container-item",{staticClass:"wu-user-topics",attrs:{id:"topics"}},[t._l(t.userInfo.recent_topics,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_topics.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),"collect"===t.userTab?n("tab-container-item",{attrs:{id:"collect"}},[t.userInfo.collect.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1),t.userInfo.collect.length?n("div",{staticClass:"wu-user__collect"},t._l(t.userInfo.collect,function(e,a){return n("router-link",{key:a,attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)})):t._e()]):t._e()],1)],1)],1):t._e()},la=[],pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:t.path.details(t.topics.id)}},[n("div",{staticClass:"wu-topics-item"},[n("div",{staticClass:"wu-topics-item__container"},[n("img",{attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"wu-topics-item__container__body"},[n("div",{staticClass:"wu-topics-item__container__body-title"},[t._v(t._s(t.topics.title))]),n("div",{staticClass:"wu-topics-item__container__body-author"},[t._v(t._s(t.topics.author.loginname)+"\n          "),n("span",{staticClass:"wu-topics-item__container__body-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])])])])},da=[],ba=n("6f07"),fa=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(sa="undefined"!==typeof ba["RecentInfo"]&&ba["RecentInfo"])?sa:Object)],fa.prototype,"topics",void 0),fa=O["a"]([Object(j["a"])({mixins:[te],inject:["path"]})],fa);var va=fa,ha=va,_a=(n("1cc0"),Object(C["a"])(ha,pa,da,!1,null,null,null));_a.options.__file="index.vue";var ma,ga,Oa=_a.exports,ja=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.currentScrollTop=0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.userInfo.loginname,!t.t0){t.next=4;break}return t.next=4,this.getUserInfo(this.loginname);case 4:this.init(),this.$refs.content.$el.scrollTop=this.user.scroll;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"init",value:function(){this.$refs.content.$el.setAttribute("style","height:".concat(this.userContainerHeight(),"px"))}},{key:"userContainerHeight",value:function(){var t=[".wu-navbar",".wu-user-container__header",".wu-tabs"],e=[".wu-user .wu-navbar",".wu-user-container__header",".wu-user .wu-tabs",".wu-tabbar"],n=this.my?ke(e):ke(t);return Se-n}},{key:"handerScroll",value:function(t){var e=t.srcElement,n=(e.clientHeight,e.scrollTop);e.scrollHeight;this.currentScrollTop=n}},{key:"destroyed",value:function(){this.updateUserScroll(this.currentScrollTop)}},{key:"userInfo",get:function(){var t=this;return this.users.filter(function(e){return e.loginname===t.loginname})[0]||{}}},{key:"userTab",get:function(){return this.user.tab},set:function(t){this.userTab!==t&&("collect"===t&&!this.userInfo.collect.length&&this.getUserCollect(this.loginname),this.changeUserTab(t))}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],ja.prototype,"loginname",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],ja.prototype,"my",void 0),O["a"]([Object(ye["a"])(Un),O["b"]("design:type",Function)],ja.prototype,"getUserInfo",void 0),O["a"]([Object(ye["a"])(An),O["b"]("design:type",Function)],ja.prototype,"changeUserTab",void 0),O["a"]([Object(ye["a"])(Hn),O["b"]("design:type",Function)],ja.prototype,"updateUserScroll",void 0),O["a"]([Object(ye["a"])(Pn),O["b"]("design:type",Function)],ja.prototype,"logout",void 0),O["a"]([Object(ye["a"])(Bn),O["b"]("design:type",Function)],ja.prototype,"getUserCollect",void 0),O["a"]([Object(ye["b"])(function(t){return t.user.users}),O["b"]("design:type","function"===typeof(ma="undefined"!==typeof Array&&Array)?ma:Object)],ja.prototype,"users",void 0),O["a"]([Object(ye["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(ga="undefined"!==typeof ba["UserState"]&&ba["UserState"])?ga:Object)],ja.prototype,"user",void 0),ja=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,Tabs:qt,TabsItem:Xt,TabContainer:_t,TabContainerItem:Tt,TopicsItem:Oa,TopicsCard:fe},mixins:[te],inject:["path"]})],ja);var ya=ja,wa=ya,Ta=(n("51b3"),Object(C["a"])(wa,ua,la,!1,null,null,null));Ta.options.__file="index.vue";var Ca,ka=Ta.exports,xa=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.accessToken="",t}return Object(_["a"])(e,[{key:"handlerLogin",value:function(){var t=this;this.accessToken?Rn(this.accessToken).then(function(e){return e.success&&t.userLogin(Object.assign({},e,{accessToken:t.accessToken,localToken:t.accessToken}))}):jn.show("请输入用户令牌")}},{key:"mounted",value:function(){var t=this,e=this.user.localToken;!this.user.accessToken&&e&&Rn(e).then(function(n){return n.success&&t.userLogin(Object.assign({},n,{accessToken:e,localToken:e}))})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(ye["a"])(Mn),O["b"]("design:type",Function)],xa.prototype,"userLogin",void 0),O["a"]([Object(ye["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(Ca="undefined"!==typeof ba["UserState"]&&ba["UserState"])?Ca:Object)],xa.prototype,"user",void 0),xa=O["a"]([Object(j["a"])({components:{NavBar:Nt,User:ka}})],xa);var Sa=xa,Ia=Sa,$a=(n("5442"),Object(C["a"])(Ia,ra,oa,!1,null,null,null));$a.options.__file="index.vue";var Ea,Ra=$a.exports,Na=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-message"},[n("nav-bar",[t._v("消息中心")]),n("div",{staticClass:"wu-message-container"},[t.user.localToken?[t.user.message.length?t._e():n("div",{staticClass:"wu-message__no-data"},[n("icon",{attrs:{type:"no-data"}})],1),t._l(t.user.message,function(t,e){return n("message-item",{key:e,attrs:{message:t}})})]:[n("span",{staticClass:"wu-message-notLogin"},[t._v("请登录")])]],2)],1)},La=[],Ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-messageItem"},[n("div",{staticClass:"wu-messageItem-container"},[n("img",{staticClass:"wu-messageItem-container-avatar",attrs:{src:t.message.author.avatar_url}}),n("div",{staticClass:"wu-messageItem-container-content"},[n("router-link",{attrs:{to:t.path.user(t.message.author.loginname)}},[n("span",[t._v(t._s(t.message.author.loginname))])]),t._v(" "+t._s("reply"===t.message.type?"回复了你的话题":"在话题")+"\n      "),n("router-link",{attrs:{to:t.path.details(t.message.topic.id)}},[n("span",[t._v(t._s(t.message.topic.title))])]),t._v(" "+t._s("at"===t.message.type?"中@了你":"")+"\n      "),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-messageItem-container-reply",domProps:{innerHTML:t._s(t.message.reply.content)}}),n("div",{staticClass:"wu-messageItem-container-time"},[t._v(t._s(t.ago(t.message.create_at)))])],1)])])},Aa=[],Ha=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(Ea="undefined"!==typeof ba["MessageInfo"]&&ba["MessageInfo"])?Ea:Object)],Ha.prototype,"message",void 0),Ha=O["a"]([Object(j["a"])({mixins:[te],inject:["path"]})],Ha);var Ma=Ha,Pa=Ma,qa=(n("8331"),Object(C["a"])(Pa,Ua,Aa,!1,null,null,null));qa.options.__file="message-item.vue";var Ba,Fa=qa.exports,Da=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=Se-ke([".wu-message .wu-navbar",".wu-tabbar"]);xe(".wu-message-container","style","height:".concat(t,"px"));var e=this.user.localToken||this.user.accessToken;e&&!this.user.message.length&&this.getMessage(e),e&&this.user.message.length&&Ln()}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(ye["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(Ba="undefined"!==typeof ba["UserState"]&&ba["UserState"])?Ba:Object)],Da.prototype,"user",void 0),O["a"]([Object(ye["a"])(qn),O["b"]("design:type",Function)],Da.prototype,"getMessage",void 0),Da=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,MessageItem:Fa}})],Da);var Ga=Da,Wa=Ga,Ja=(n("16c5"),Object(C["a"])(Wa,Na,La,!1,null,null,null));Ja.options.__file="index.vue";var Qa=Ja.exports,Xa=[{id:"home",value:"首页"},{id:"edit",value:"发布"},{id:"message",value:"消息"},{id:"user",value:"我的"}],Va=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tabbars=Xa,t}return Object(_["a"])(e,[{key:"tabbar",get:function(){return this._tabbar},set:function(t){this.tabbar!==t&&this.changeTabBar(t)}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(ye["a"])(me),O["b"]("design:type",Function)],Va.prototype,"changeTabBar",void 0),O["a"]([Object(ye["b"])(function(t){return t.topics.tabbar}),O["b"]("design:type",String)],Va.prototype,"_tabbar",void 0),Va=O["a"]([Object(j["a"])({components:{TabBar:Q,TabBarTab:nt,Icon:lt,TabContainer:_t,TabContainerItem:Tt,Edit:ca,Login:Ra,Message:Qa,Home:Le},inject:["path"]})],Va);var Ya=Va,za=Ya,Ka=Object(C["a"])(za,M,P,!1,null,null,null);Ka.options.__file="index.vue";var Za,ti=Ka.exports,ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.details.author?n("div",{staticClass:"wu-topics-details"},[n("nav-bar",{staticClass:"wu-topics-details__navbar",on:{leftClick:function(e){t.$router.go(-1)}}},[n("Icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t._v("主题详情\n  ")],1),n("div",{ref:"details",staticClass:"wu-topics-details__container",on:{scroll:t.handlerScroll}},[n("div",{staticClass:"wu-topics-details__title"},[t._v(t._s(t.details.title))]),n("div",{staticClass:"wu-topics-details__header"},[n("img",{staticClass:"wu-topics-details__header-avatar",attrs:{src:t.details.author.avatar_url,alt:"avatar"}}),n("span",{staticClass:"wu-topics-details__header-nickname"},[n("router-link",{attrs:{to:t.path.user(t.details.author.loginname)}},[t._v(t._s(t.details.author.loginname))])],1),n("span",{staticClass:"wu-topics-details__header-text"},[t._v(t._s("发布于"+t.ago(t.details.create_at)))])]),n("div",{staticClass:"wu-topics-details__body"},[n("div",{staticClass:"wu-topics-details__body-left"},[n("span",[t._v("阅读数："+t._s(t.details.visit_count))]),n("span",[t._v("回复数："+t._s(t.details.reply_count))])]),n("span",{class:t.collectCls,on:{click:t.handlerCollect}},[t._v(t._s(t.details.is_collect?"取消收藏":"收藏"))])]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-topics-details__content",domProps:{innerHTML:t._s(t.details.content)}}),n("div",{staticClass:"wu-topics-details__replies"},[t.user.accessToken||t.user.localToken?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{maxlength:"150",placeholder:"我来说一句"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),n("div",{staticClass:"wu-topics-details-submit"},[n("span",{on:{click:t.handlerSubmit}},[t._v("评论")])])]):n("div",{staticClass:"wu-topics-details__notLogin"},[t._v("\n        请登录后再来评论\n      ")])]),t.replies.length?n("replies",{attrs:{replies:t.replies}}):n("div",{staticClass:"wu-topics-details__notReplies"},[t._v("\n      还没有评论，快来抢沙发\n    ")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.details.scrollTop=0}}})],1):t._e()},ni=[],ai=n("c93e"),ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-topic-details-comment"},[n("div",{staticClass:"wu-topic-details-comment__header"},[t._v("共有"+t._s(t.replies.length)+"条留言")]),t._l(t.replies,function(e,a){return n("replie",{key:a,attrs:{replie:e}},[t._v(t._s(a+1))])})],2)},si=[],ci=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card",{staticClass:"wu-topic-details__replie"},[n("div",{staticClass:"wu-topic-details__replie__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"wu-topic-details__replie-avatar",attrs:{src:t.replie.author.avatar_url}}),n("span",{staticClass:"wu-topic-details__replie-nickname"},[n("router-link",{attrs:{to:t.path.user(t.replie.author.loginname)}},[t._v(t._s(t.replie.author.loginname))])],1),t.replie.is_author?n("span",{staticClass:"wu-topic-details__replie-author"},[t._v("作者")]):t._e(),n("span",{staticClass:"wu-topic-details__replie-floor"},[t._t("default"),t._v("楼")],2)]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{slot:"body"},domProps:{innerHTML:t._s(t.replie.content)},slot:"body"}),n("div",{staticClass:"wu-topic-details__replie__footer",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"wu-topic-details__replie-time"},[t._v(t._s(t.ago(t.replie.create_at)))]),t.replie.ups.length?n("span",{staticClass:"wu-topic-details__replie-uped"},[n("icon",{attrs:{type:"like"}}),t._v(t._s(t.replie.ups.length)+"\n    ")],1):t._e()])])},ri=[],oi=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(Za="undefined"!==typeof zt["RepliesInfo"]&&zt["RepliesInfo"])?Za:Object)],oi.prototype,"replie",void 0),oi=O["a"]([Object(j["a"])({components:{Card:oe,Icon:lt},mixins:[te],inject:["path"]})],oi);var ui=oi,li=ui,pi=(n("7ea8"),Object(C["a"])(li,ci,ri,!1,null,null,null));pi.options.__file="replie.vue";var di,bi=pi.exports,fi=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(di="undefined"!==typeof Array&&Array)?di:Object)],fi.prototype,"replies",void 0),fi=O["a"]([Object(j["a"])({components:{Replie:bi}})],fi);var vi=fi,hi=vi,_i=(n("8a8f"),Object(C["a"])(hi,ii,si,!1,null,null,null));_i.options.__file="index.vue";var mi,gi,Oi=_i.exports,ji="wu-topics-details",yi=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.scroll=0,t.showTop=!1,t.comment="",t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.details.author,!t.t0){t.next=4;break}return t.next=4,this.getTopicDetails(this.topic);case 4:this.details.scroll>200&&(this.showTop=!0),e=Se-Ce(".wu-navbar","clientHeight"),xe(".".concat(ji,"__container"),"style","height:".concat(e,"px")),this.$refs.details.scrollTop=this.details.scroll;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handlerScroll",value:function(t){var e=t.srcElement.scrollTop;this.scroll=e,this.showTop=e>200}},{key:"handlerCollect",value:function(){var t=this;this.user.localToken?this.collect().then(function(e){t.changeCollect({topic:t.topic,result:e})}):jn.show("请登录")}},{key:"collect",value:function(){var t=this.user.accessToken,e=this.details.id,n={accesstoken:t,topic_id:e};return this.details.is_collect?En(n):$n(n)}},{key:"handlerSubmit",value:function(){var t=this,e=this.comment,n=this.topic,a=this.getTopicDetails;e?ta({content:e,topic_id:n}).then(function(){var e=Object(wn["a"])(regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i.success&&jn.show("评论成功"),t.comment="",e.next=4,a(n);case 4:t.$refs.details.scrollTop=t.$refs.details.scrollHeight;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):jn.show("评论内容不能为空")}},{key:"beforeDestroy",value:function(){var t=this.topic,e=this.scroll;this.setTopicScroll({id:t,scroll:e})}},{key:"details",get:function(){var t=this;return this.openTopics.filter(function(e){return e.id===t.topic})[0]||{}}},{key:"replies",get:function(){var t=this;return this.details.replies.reduce(function(e,n){return t.details.author.loginname===n.author.loginname?e.push(Object(ai["a"])({is_author:!0},n)):e.push(n),e},[])}},{key:"collectCls",get:function(){return["".concat(ji,"__body-collect"),Object(Y["a"])({},"".concat(ji,"__body-cancelCollect"),this.details.is_collect)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],yi.prototype,"topic",void 0),O["a"]([Object(ye["b"])(function(t){return t.topics.openTopics}),O["b"]("design:type","function"===typeof(mi="undefined"!==typeof Array&&Array)?mi:Object)],yi.prototype,"openTopics",void 0),O["a"]([Object(ye["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(gi="undefined"!==typeof ba["UserState"]&&ba["UserState"])?gi:Object)],yi.prototype,"user",void 0),O["a"]([Object(ye["a"])(he),O["b"]("design:type",Function)],yi.prototype,"getTopicDetails",void 0),O["a"]([Object(ye["a"])(Oe),O["b"]("design:type",Function)],yi.prototype,"setTopicScroll",void 0),O["a"]([Object(ye["a"])(je),O["b"]("design:type",Function)],yi.prototype,"changeCollect",void 0),yi=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,Replies:Oi},mixins:[te],inject:["path"]})],yi);var wi=yi,Ti=wi,Ci=(n("6aec"),Object(C["a"])(Ti,ei,ni,!1,null,null,null));Ci.options.__file="index.vue";var ki=Ci.exports;c["default"].use(H["a"]);var xi=new H["a"]({routes:[{path:"/",name:"Home",component:ti},{path:"/details/:topic",name:"topicDetails",component:ki,props:!0},{path:"/user/:loginname",name:"user",component:ka,props:!0}]}),Si=(n("f5df"),n("26e2"),function(){return"/"}),Ii=function(t){return"/details/".concat(t)},$i=function(t){return"/user/".concat(t)},Ei=function(){return"/edit"};c["default"].config.productionTip=!1,new c["default"]({el:"#app",router:xi,store:Jn,render:function(t){return t(A)},provide:{path:s}})},da3a:function(t,e,n){},dacc:function(t,e,n){},dee0:function(t,e,n){},e0e8:function(t,e,n){"use strict";var a=n("2d9f"),i=n.n(a);i.a},e8e8:function(t,e){},f66a:function(t,e,n){},ffad:function(t,e,n){}});
//# sourceMappingURL=app.fc7584bf.js.map