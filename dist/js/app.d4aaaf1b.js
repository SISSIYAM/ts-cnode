(function(t){function e(e){for(var a,s,o=e[0],r=e[1],u=e[2],p=0,d=[];p<o.length;p++)s=o[p],i[s]&&d.push(i[s][0]),i[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(c.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},c=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=r;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"026b":function(t,e,n){"use strict";var a=n("77eb"),i=n.n(a);i.a},"02a0":function(t,e,n){},"0a8c":function(t,e,n){},"16c5":function(t,e,n){"use strict";var a=n("5b7d"),i=n.n(a);i.a},"1cc0":function(t,e,n){"use strict";var a=n("f66a"),i=n.n(a);i.a},"20c8":function(t,e,n){},"26e2":function(t,e,n){},2856:function(t,e,n){},"2d9f":function(t,e,n){},"2eff":function(t,e,n){},3251:function(t,e,n){"use strict";var a=n("ce00"),i=n.n(a);i.a},3343:function(t,e,n){},"34d7":function(t,e,n){"use strict";var a=n("dacc"),i=n.n(a);i.a},3544:function(t,e,n){"use strict";var a=n("4539"),i=n.n(a);i.a},"3b2a":function(t,e,n){"use strict";var a=n("0a8c"),i=n.n(a);i.a},"3e69":function(t,e,n){},"438d":function(t,e,n){},4539:function(t,e,n){},"48b8":function(t,e,n){},"4a09":function(t,e,n){},"4dc5":function(t,e,n){"use strict";var a=n("af12"),i=n.n(a);i.a},"51b3":function(t,e,n){"use strict";var a=n("3e69"),i=n.n(a);i.a},5442:function(t,e,n){"use strict";var a=n("438d"),i=n.n(a);i.a},"5b7d":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("2856"),i=n.n(a);i.a},"5e3f":function(t,e,n){"use strict";var a=n("2eff"),i=n.n(a);i.a},"5f5b":function(t,e,n){"use strict";var a=n("48b8"),i=n.n(a);i.a},6641:function(t,e,n){"use strict";var a=n("20c8"),i=n.n(a);i.a},"6aec":function(t,e,n){"use strict";var a=n("02a0"),i=n.n(a);i.a},"6f07":function(t,e){},7514:function(t,e,n){},"77eb":function(t,e,n){},"7ea8":function(t,e,n){"use strict";var a=n("b77a"),i=n.n(a);i.a},8331:function(t,e,n){"use strict";var a=n("7514"),i=n.n(a);i.a},"8a8f":function(t,e,n){"use strict";var a=n("dee0"),i=n.n(a);i.a},a492:function(t,e,n){},a775:function(t,e,n){"use strict";var a=n("b194"),i=n.n(a);i.a},af12:function(t,e,n){},b0ee:function(t,e,n){"use strict";var a=n("4a09"),i=n.n(a);i.a},b194:function(t,e,n){},b3a8:function(t,e,n){"use strict";var a=n("a492"),i=n.n(a);i.a},b77a:function(t,e,n){},bed9:function(t,e,n){"use strict";var a=n("da3a"),i=n.n(a);i.a},c5c6:function(t,e,n){"use strict";var a=n("3343"),i=n.n(a);i.a},cc79:function(t,e,n){"use strict";var a=n("ffad"),i=n.n(a);i.a},cd49:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"state",function(){return Cn}),n.d(a,"actions",function(){return Tn}),n.d(a,"mutations",function(){return xn}),n.d(a,"getters",function(){return Sn});var i={};n.r(i),n.d(i,"state",function(){return Bn}),n.d(i,"actions",function(){return Gn}),n.d(i,"mutations",function(){return Wn}),n.d(i,"getters",function(){return Jn});var c={};n.r(c),n.d(c,"home",function(){return Ei}),n.d(c,"details",function(){return Ri}),n.d(c,"user",function(){return Ni}),n.d(c,"edit",function(){return Li});n("cadf"),n("551c"),n("097d");var s=n("2b0e"),o=(n("ac6a"),n("a70e")),r=n.n(o),u=n("4dd1"),l=n.n(u);n("9f21");r.a.registerLanguage("javascript",l.a),s["default"].directive("highlight",function(t){var e=t.querySelectorAll("pre code");e.length&&e.forEach(function(t){r.a.highlightBlock(t)})});var p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},d=[],b=(n("a481"),n("c665")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"wu-imgView",on:{click:function(e){t.show=!1}}},[n("img",{attrs:{src:t.src}})]):t._e()},v=[],h=n("dc0a"),_=n("aa9a"),m=n("d328"),g=n("11d9"),O=n("9ab4"),j=n("60a3"),y=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.$nextTick(function(){t.$el.scrollLeft=(t.$el.scrollWidth-t.$el.clientWidth)/2})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],y.prototype,"src",void 0),y=O["a"]([j["a"]],y);var w=y,k=w,C=(n("a775"),n("2877")),T=Object(C["a"])(k,f,v,!1,null,null,null);T.options.__file="img-view.vue";var x=T.exports,S=s["default"].extend(x),$=document.createElement("div"),I=function t(e){Object(b["a"])(this,t),document.body.appendChild(new S({el:$,propsData:{src:e}}).$el)},E=function(t){return new I(t)},R=function(){document.querySelector("#app").addEventListener("click",function(t){var e=t||window.event,n=e.target;if("a"===n.nodeName.toLowerCase()&&~n.textContent.indexOf("@")){var a=n.textContent.replace("@","");t.preventDefault(),window.location.href="".concat(window.location.origin,"/#/user/").concat(a)}"img"===n.nodeName.toLowerCase()&&E(n.currentSrc)})},N={mounted:function(){R()}},L=N,U=(n("5c0b"),Object(C["a"])(L,p,d,!1,null,null,null));U.options.__file="App.vue";var A=U.exports,P=n("8c4f"),H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("tab-container",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},[n("tab-container-item",{attrs:{id:"home"}},[n("wu-home")],1),n("tab-container-item",{attrs:{id:"edit"}},[n("wu-edit")],1),n("tab-container-item",{attrs:{id:"user"}},["user"===t.tabbar?n("wu-login"):t._e()],1),n("tab-container-item",{attrs:{id:"message"}},["message"===t.tabbar?n("wu-message"):t._e()],1)],1),n("wu-tabbar",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},t._l(t.tabbars,function(e){return n("wu-tabbartab",{key:e.id,attrs:{id:e.id}},[n("Icon",{attrs:{slot:"icon",type:e.id},slot:"icon"}),t._v(t._s(e.value)+"\n    ")],1)}))],1)},M=[],q=n("a322"),F=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className},[t._t("default")],2)}),D=[],B="wu-tabbar",G=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(B),"".concat(B,"-").concat(this.tabbarPosition)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])({default:"bottom"}),O["b"]("design:type",String)],G.prototype,"tabbarPosition",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],G.prototype,"value",void 0),G=O["a"]([j["a"]],G);var W=G,J=W,Q=(n("cc79"),Object(C["a"])(J,F,D,!1,null,null,null));Q.options.__file="index.vue";var X=Q.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.tabbarTabCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("div",{staticClass:"wu-tabbar-tab-icon"},[t._t("icon")],2),n("div",{staticClass:"wu-tabbar-tab-title"},[t._t("default")],2)])},Y=[],z="wu-tabbar-tab",K=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"tabbarTabCls",get:function(){return["".concat(z),Object(q["a"])({},"".concat(z,"-is-selected"),this.$parent.value===this.id)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],K.prototype,"id",void 0),K=O["a"]([j["a"]],K);var Z=K,tt=Z,et=(n("026b"),Object(C["a"])(tt,V,Y,!1,null,null,null));et.options.__file="index.vue";var nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:t.className})},it=[],ct="iconfont",st=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(ct),"icon-".concat(this.type)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],st.prototype,"type",void 0),st=O["a"]([j["a"]],st);var ot=st,rt=ot,ut=Object(C["a"])(rt,at,it,!1,null,null,null);ut.options.__file="index.vue";var lt=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tab-container",on:{scroll:t.handlerScroll}},[t._t("default")],2)},dt=[],bt=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){this.$emit("scroll",t)}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],bt.prototype,"value",void 0),bt=O["a"]([j["a"]],bt);var ft=bt,vt=ft,ht=(n("b0ee"),Object(C["a"])(vt,pt,dt,!1,null,null,null));ht.options.__file="index.vue";var _t=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.id===t.$parent.value,expression:"id === $parent.value"}],staticClass:"wu-tab-container-item"},[t._t("default")],2)},gt=[],Ot=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Ot.prototype,"id",void 0),Ot=O["a"]([j["a"]],Ot);var jt=Ot,yt=jt,wt=(n("b3a8"),Object(C["a"])(yt,mt,gt,!1,null,null,null));wt.options.__file="index.vue";var kt=wt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-home"},[n("nav-bar",[t._v("\n    首页\n  ")]),n("div",{staticClass:"content"},[n("tabs",{model:{value:t.topicsTab,callback:function(e){t.topicsTab=e},expression:"topicsTab"}},t._l(t.topicTabs,function(e){return n("tabs-item",{key:e.id,attrs:{id:e.id}},[t._v(t._s(e.value))])})),n("tab-container",{ref:"topicsContent",staticClass:"topics__item",on:{scroll:t.handlerScroll}},t._l(t.topics,function(e,a){return n("tab-container-item",{key:a,staticClass:"tab__container__item"},[n("router-link",{attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)],1)}))],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.topicsContent.$el.scrollTop=0}}})],1)},Tt=[],xt=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-navbar"},[n("div",{staticClass:"wu-navbar-left",on:{click:function(e){t.$emit("leftClick")}}},[t._t("left")],2),n("div",{staticClass:"wu-navbar-content"},[t._t("default")],2),n("div",{staticClass:"wu-navbar-right",on:{click:function(e){t.$emit("rightClick")}}},[t._t("right")],2)])}),St=[],$t=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);$t=O["a"]([j["a"]],$t);var It=$t,Et=It,Rt=(n("4dc5"),Object(C["a"])(Et,xt,St,!1,null,null,null));Rt.options.__file="index.vue";var Nt=Rt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tabs"},[t._t("default")],2)},Ut=[],At=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],At.prototype,"value",void 0),At=O["a"]([j["a"]],At);var Pt=At,Ht=Pt,Mt=(n("6641"),Object(C["a"])(Ht,Lt,Ut,!1,null,null,null));Mt.options.__file="index.vue";var qt=Mt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[t._t("default")],2)},Dt=[],Bt="wu-tabs-item",Gt=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(Bt),Object(q["a"])({},"".concat(Bt,"-selected"),this.id===this.$parent.value)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Gt.prototype,"id",void 0),Gt=O["a"]([j["a"]],Gt);var Wt=Gt,Jt=Wt,Qt=(n("e0e8"),Object(C["a"])(Jt,Ft,Dt,!1,null,null,null));Qt.options.__file="index.vue";var Xt=Qt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"topics__card"},[n("div",{staticClass:"topics__item__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"topics__item-avatar",attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"topics__item__header__container"},[n("div",{staticClass:"topics__item__header__container-nickname"},[t._v(t._s(t.topics.author.loginname))]),t.topics.top?n("Icon",{attrs:{type:"hot"}}):t._e(),t.topics.good?n("Icon",{attrs:{type:"good"}}):t._e(),n("div",{staticClass:"topics__item__header__container-text"},[t._v(t._s(t.topicsHeaderText))])],1)]),n("div",{staticClass:"topics__item__body",attrs:{slot:"body"},slot:"body"},[t._v("\n    "+t._s(t.topics.title)+"\n  ")]),n("div",{staticClass:"topics__item__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",[n("Icon",{attrs:{type:"chakan"}}),t._v(t._s(t.topics.visit_count)+" ")],1),n("div",[n("Icon",{attrs:{type:"comment"}}),t._v(t._s(t.topics.reply_count))],1),n("div",{staticClass:"topics__item__footer-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])},Yt=[],zt=n("e8e8");function Kt(t){var e=(new Date).getTime()-new Date(t).getTime(),n=Math.floor(e/864e5),a=e%864e5,i=Math.floor(a/36e5),c=a%36e5,s=Math.floor(c/6e4),o=c%6e4,r=Math.round(o/1e3);return 0!==n?n>365?"".concat(Math.floor(n/365),"年前"):n>30?"".concat(Math.floor(n/30),"月前"):n<0?"刚刚":"".concat(n,"天前"):0!==i?"".concat(i,"小时前"):0!==s?"".concat(s,"分钟前"):0!==r?"".concat(r,"秒前"):0===r?"刚刚":void 0}function Zt(t){switch(t){case"share":return"分享";case"ask":return"问答";case"good":return"精华";case"job":return"招聘";default:return""}}var te={methods:{ago:Kt,getTab:Zt}},ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-card"},[n("div",{staticClass:"wu-card-container"},[n("div",{staticClass:"wu-card__header"},[t._t("header")],2),n("div",{staticClass:"wu-card__body"},[t._t("body")],2),n("div",{staticClass:"wu-card__footer"},[t._t("footer")],2)])])},ne=[],ae=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);ae=O["a"]([j["a"]],ae);var ie=ae,ce=ie,se=(n("bed9"),Object(C["a"])(ce,ee,ne,!1,null,null,null));se.options.__file="index.vue";var oe,re=se.exports,ue=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"topicsHeaderText",get:function(){return"".concat(this.ago(this.topics.create_at),"发布至").concat(this.getTab(this.topics.tab))}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(oe="undefined"!==typeof zt["TopicInfo"]&&zt["TopicInfo"])?oe:Object)],ue.prototype,"topics",void 0),ue=O["a"]([Object(j["a"])({components:{Card:re,Icon:lt},mixins:[te]})],ue);var le=ue,pe=le,de=(n("3b2a"),Object(C["a"])(pe,Vt,Yt,!1,null,null,null));de.options.__file="index.vue";var be,fe,ve=de.exports,he="REQUEST__TOPICS",_e="REQUEST__TOPIC__DETAILS",me="TOPICS__CHANGE__TAB",ge="CHANGE__TABBAR",Oe="SET__TOPICS__SCROLL",je="SET__TOPIC__SCROLL",ye="CHANGE__COLLECT",we=n("4bb5"),ke=function(t,e){return window.localStorage.setItem(t,e)},Ce=function(t){return window.localStorage.getItem(t)},Te=function(t,e){return document.querySelector(t)[e]},xe=function(t){return t.reduce(function(t,e){return t+Te(e,"clientHeight")},0)},Se=function(t,e,n){return document.querySelector(t).setAttribute(e,n)},$e=document.documentElement.clientHeight,Ie=[{id:"all",value:"全部"},{id:"good",value:"精华"},{id:"share",value:"分享"},{id:"ask",value:"问答"},{id:"job",value:"招聘"}],Ee=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.page=1,t.contentHeight=0,t.showTop=!1,t.currentScrollTop=0,t.topicTabs=Ie,t}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){var e=t.srcElement,n=e.clientHeight,a=e.scrollTop,i=e.scrollHeight;this.currentScrollTop=a;var c=i-a===n;this.showTop=a>400,c&&this.topics.length&&++this.page&&this.requestTopics({tab:this.topicsTab,page:this.page})}},{key:"mounted",value:function(){!this.topics.length&&this.requestTopics(),this.init(),this.$refs.topicsContent.$el.scrollTop=this.scroll}},{key:"init",value:function(){var t=[".wu-tabbar",".wu-navbar",".wu-tabs"],e=$e-xe(t);this.$refs.topicsContent.$el.setAttribute("style","height:".concat(e,"px"))}},{key:"beforeDestroy",value:function(){this.setTopicsScroll(this.currentScrollTop)}},{key:"topicsTab",get:function(){return this.currentTab},set:function(t){this.page=1,this.topicsChangeTab(t),this.requestTopics({tab:t,page:1})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(we["a"])(he),O["b"]("design:type",Function)],Ee.prototype,"requestTopics",void 0),O["a"]([Object(we["a"])(me),O["b"]("design:type",Function)],Ee.prototype,"topicsChangeTab",void 0),O["a"]([Object(we["a"])(Oe),O["b"]("design:type",Function)],Ee.prototype,"setTopicsScroll",void 0),O["a"]([Object(we["b"])(function(t){return t.topics.topics}),O["b"]("design:type","function"===typeof(fe="undefined"!==typeof Array&&Array)?fe:Object)],Ee.prototype,"topics",void 0),O["a"]([Object(we["b"])(function(t){return t.topics.topicsScroll}),O["b"]("design:type",Number)],Ee.prototype,"scroll",void 0),O["a"]([Object(we["b"])(function(t){return t.topics.currentTab}),O["b"]("design:type",String)],Ee.prototype,"currentTab",void 0),Ee=O["a"]([Object(j["a"])({components:(be={},Object(q["a"])(be,_t.name,_t),Object(q["a"])(be,kt.name,kt),Object(q["a"])(be,Nt.name,Nt),Object(q["a"])(be,qt.name,qt),Object(q["a"])(be,Xt.name,Xt),Object(q["a"])(be,ve.name,ve),be),inject:["path"]})],Ee);var Re=Ee,Ne=Re,Le=(n("34d7"),Object(C["a"])(Ne,Ct,Tt,!1,null,null,null));Le.options.__file="index.vue";var Ue=Le.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-edit"},[n("nav-bar",{on:{rightClick:t.handlerSubmit}},[t._v("新建主题\n    "),n("span",{attrs:{slot:"right"},slot:"right"},[t._v("发布")])]),n("div",{staticClass:"wu-edit-container"},[n("div",{staticClass:"wu-edit-container__title"},[n("icon",{attrs:{type:"title"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__content"},[n("icon",{attrs:{type:"content"}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"30",rows:"5",placeholder:"请输入内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__tab"},[n("icon",{attrs:{type:"classify"}}),n("span",{staticClass:"wu-edit-container__tab-title"},[t._v("选择分类")])],1),n("Labels",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("label-item",{attrs:{id:"share",label:"分享"}}),n("label-item",{attrs:{id:"ask",label:"问答"}}),n("label-item",{attrs:{id:"job",label:"招聘"}}),n("label-item",{attrs:{id:"dev",label:"开发"}})],1)],1)],1)},Pe=[],He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-label"},[t._t("default")],2)},Me=[],qe=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],qe.prototype,"value",void 0),qe=O["a"]([j["a"]],qe);var Fe=qe,De=Fe,Be=(n("3544"),Object(C["a"])(De,He,Me,!1,null,null,null));Be.options.__file="index.vue";var Ge=Be.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.labelItemCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("span",[t._v(t._s(t.label))])])},Je=[],Qe="wu-label-item",Xe=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"labelItemCls",get:function(){return["".concat(Qe),Object(q["a"])({},"".concat(Qe,"-selected"),this.$parent.value===this.id)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Xe.prototype,"id",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Xe.prototype,"label",void 0),Xe=O["a"]([j["a"]],Xe);var Ve=Xe,Ye=Ve,ze=(n("c5c6"),Object(C["a"])(Ye,We,Je,!1,null,null,null));ze.options.__file="index.vue";var Ke=ze.exports,Ze=(n("f751"),n("bc3a")),tn=n.n(Ze),en="https://cnodejs.org/api/v1/",nn={},an=["Null","Array","String","Object","Number","Boolean","Function","Undefined"];an.map(function(t){return nn["is".concat(t)]=function(e){return toString.call(e)==="[object ".concat(t,"]")}});var cn=nn,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toast"}},[t.show?n("div",{class:t.toast},[t.icon?n("div",{class:t.iconCls}):t._e(),n("div",{staticClass:"wu-toast-content"},[t._v("\n      "+t._s(t.message)+"\n    ")])]):t._e()])},on=[],rn="wu-toast",un=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.duration>0&&setTimeout(function(){t.show=!t.show},this.duration)}},{key:"iconCls",get:function(){return["iconfont",Object(q["a"])({},"icon-".concat(this.icon),this.icon)]}},{key:"toast",get:function(){return["".concat(rn),"".concat(rn,"-").concat(this.position)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],un.prototype,"message",void 0),O["a"]([Object(j["b"])({default:3e3}),O["b"]("design:type",Number)],un.prototype,"duration",void 0),O["a"]([Object(j["b"])({default:""}),O["b"]("design:type",String)],un.prototype,"icon",void 0),O["a"]([Object(j["b"])({default:"center"}),O["b"]("design:type",String)],un.prototype,"position",void 0),un=O["a"]([Object(j["a"])({components:{Icon:lt}})],un);var ln=un,pn=ln,dn=(n("5f5b"),Object(C["a"])(pn,sn,on,!1,null,null,null));dn.options.__file="toast.vue";var bn,fn,vn,hn,_n=dn.exports,mn=s["default"].extend(_n),gn=document.createElement("div"),On=function(t){return cn.isObject(t)?t:{message:t}},jn=function(){function t(){Object(b["a"])(this,t),this.queue=[]}return Object(_["a"])(t,[{key:"createToast",value:function(t){var e=On(t),n=new mn({el:gn,propsData:e});return document.body.appendChild(n.$el),this.queue.push(n),this.queue[this.queue.length-1]}},{key:"show",value:function(t){return this.createToast(t)}},{key:"hide",value:function(){this.queue[this.queue.length-1].show=!1,this.queue.pop()}},{key:"clearAll",value:function(){this.queue.map(function(t){return t.show=!1}),this.queue=[]}},{key:"loading",value:function(t){return this.createToast({icon:"loading",message:t,duration:0})}}]),t}(),yn=new jn,wn=n("2f62"),kn=(n("96cf"),n("3040")),Cn={currentTab:"all",tabbar:"home",topics:[],openTopics:[],topicsScroll:0},Tn=(bn={},Object(q["a"])(bn,he,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e){var n,a,i,c,s,o,r,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=u.length>1&&void 0!==u[1]?u[1]:{},i=a.tab,c=void 0===i?"all":i,s=a.page,o=void 0===s?1:s,t.next=5,Kn(c,o);case 5:r=t.sent,n(he,r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(q["a"])(bn,me,function(t,e){var n=t.commit;n(me,e)}),Object(q["a"])(bn,ge,function(t,e){var n=t.commit;n(ge,e)}),Object(q["a"])(bn,_e,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Zn(n);case 3:i=t.sent,i=Object.assign({},i,{scroll:0}),a(_e,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(q["a"])(bn,Oe,function(t,e){var n=t.commit;n(Oe,e)}),Object(q["a"])(bn,je,function(t,e){var n=t.commit;n(je,e)}),Object(q["a"])(bn,ye,function(t,e){var n=t.commit;n(ye,e)}),bn),xn=(fn={},Object(q["a"])(fn,he,function(t,e){t.topics=t.topics.concat(e)}),Object(q["a"])(fn,me,function(t,e){t.currentTab=e,t.topics=[],t.topicsScroll=0}),Object(q["a"])(fn,ge,function(t,e){t.tabbar=e}),Object(q["a"])(fn,_e,function(t,e){t.openTopics.push(e)}),Object(q["a"])(fn,Oe,function(t,e){t.topicsScroll=e}),Object(q["a"])(fn,je,function(t,e){t.openTopics.map(function(t){t.id===e.id&&(t.scroll=e.scroll)})}),Object(q["a"])(fn,ye,function(t,e){e.result&&t.openTopics.map(function(t){return t.id===e.topic&&(t.is_collect=!t.is_collect)})}),fn),Sn={},$n=function(t){return Yn("user/".concat(t)).then(function(t){return t.data.data})},In=function(t){return Yn("topic_collect/".concat(t)).then(function(t){return t.data.data})},En=function(t){return zn("topic_collect/collect",t).then(function(t){return t.data.success})},Rn=function(t){return zn("topic_collect/de_collect",t).then(function(t){return t.data.success})},Nn=function(t){return zn("accesstoken",{accesstoken:t}).then(function(t){return t.data})},Ln=function(t){return Yn("messages",{accesstoken:t}).then(function(t){var e=t.data.data,n=e.has_read_messages,a=e.hasnot_read_messages;return a.concat(n)})},Un=function(){return zn("message/mark_all").then(function(t){return t.data})},An="GET__USER__INFO",Pn="CHANGE__USER__TAB",Hn="UPDATE__USER__SCROLL",Mn="USER__LOGIN",qn="USER__LOGOUT",Fn="GET__MY__MESSAGE",Dn="GET__USER__COLLECT",Bn={localToken:Ce("accessToken"),accessToken:"",users:[],tab:"replies",scroll:0,loginname:"",avatar_url:"",id:"",message:[]},Gn=(vn={},Object(q["a"])(vn,An,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,$n(n);case 3:i=t.sent,i["collect"]=[],a(An,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(q["a"])(vn,Pn,function(t,e){var n=t.commit;n(Pn,e)}),Object(q["a"])(vn,Hn,function(t,e){var n=t.commit;n(Hn,e)}),Object(q["a"])(vn,Mn,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Ln(n.accessToken);case 3:i=t.sent,n.message=i,a(Mn,n);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(q["a"])(vn,qn,function(t){var e=t.commit;e(qn)}),Object(q["a"])(vn,Fn,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Ln(n);case 3:i=t.sent,a(Fn,i);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(q["a"])(vn,Dn,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,In(n);case 3:i=t.sent,Object.assign(i,{loginname:n}),a(Dn,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),vn),Wn=(hn={},Object(q["a"])(hn,An,function(t,e){t.tab="replies",t.scroll=0,t.users.push(e)}),Object(q["a"])(hn,Pn,function(t,e){t.tab=e}),Object(q["a"])(hn,Hn,function(t,e){t.scroll=e}),Object(q["a"])(hn,Mn,function(t,e){Object.assign(t,e),ke("accessToken",e.accessToken),ke("loginName",e.loginname)}),Object(q["a"])(hn,qn,function(t){t.accessToken="",t.localToken="",t.avatar_url="",t.id="",t.loginname="",t.message=[],ke("accessToken",""),ke("loginName","")}),Object(q["a"])(hn,ye,function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,In(e.loginname||Ce("loginName"));case 2:n=t.sent,e.users.length&&(e.users[0]["collect"]=n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(q["a"])(hn,Fn,function(t,e){t.message=e}),Object(q["a"])(hn,Dn,function(t,e){t.users.map(function(t){return t.loginname===e.loginname&&(t.collect=e)})}),hn),Jn={token:function(t){return t.accessToken},localToken:function(t){return t.localToken}};s["default"].use(wn["a"]);var Qn=new wn["a"].Store({modules:{topics:a,user:i}}),Xn=function(){return Qn.getters.localToken||Qn.getters.token},Vn=tn.a.create({baseURL:en,timeout:0,headers:{"X-Requested-With":"XMLHttpRequest"},maxContentLength:2e3});Vn.interceptors.request.use(function(t){var e=!!~t.url.indexOf("topics"),n=!!~t.url.indexOf("accesstoken"),a=t.method;return"get"===a&&!t.params&&Xn()&&(t.params=Object.assign({},t.params,{accesstoken:Xn()})),"post"!==a||n||(t.data=Object.assign({},t.data,{accesstoken:Xn()})),e&&"post"===a?yn.loading("发布中..."):yn.loading("加载中..."),t},function(t){return Promise.reject(t)}),Vn.interceptors.response.use(function(t){return yn.hide(),t},function(t){var e=t.response.data&&t.response.data.error_msg;yn.hide(),yn.show({message:e,duration:5e3})});var Yn=function(t,e){return Vn.get(t,{params:e})},zn=function(t,e){return Vn.post(t,e)},Kn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Yn("topics",{tab:t,page:e,limit:n}).then(function(t){return t.data.data})},Zn=function(t){return Yn("topic/".concat(t)).then(function(t){return t.data.data})},ta=function(t){return zn("topics",t).then(function(t){return t.data})},ea=function(t){var e=t.content,n=t.topic_id;return zn("topic/".concat(n,"/replies"),{content:e}).then(function(t){return t.data})},na=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tab="dev",t.title="",t.content="",t}return Object(_["a"])(e,[{key:"handlerSubmit",value:function(){var t=this,e=this.title,n=this.tab,a=this.content,i=this.accesstoken,c=[];if(!i)return yn.show("请登录");e||c.push("请输入标题"),a||c.push("请输入内容"),c.length&&yn.show(c.join()),e&&a&&i&&ta({title:e,tab:n,content:a,accesstoken:i}).then(function(e){return e.success&&t.$router.push({path:"/details/".concat(e.topic_id)})})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(we["b"])(function(t){return t.user.accessToken}),O["b"]("design:type",String)],na.prototype,"accesstoken",void 0),na=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,Labels:Ge,LabelItem:Ke}})],na);var aa=na,ia=aa,ca=(n("5e3f"),Object(C["a"])(ia,Ae,Pe,!1,null,null,null));ca.options.__file="index.vue";var sa,oa=ca.exports,ra=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-login"},[t.user.localToken?[t.user.loginname?n("user",{attrs:{loginname:t.user.loginname,my:"我"}}):t._e()]:[n("nav-bar",[t._v("登录")]),n("div",{staticClass:"wu-login-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accessToken,expression:"accessToken"}],attrs:{type:"text",placeholder:"请输入accessToken"},domProps:{value:t.accessToken},on:{input:function(e){e.target.composing||(t.accessToken=e.target.value)}}}),n("button",{on:{click:t.handlerLogin}},[t._v("登录")])])]],2)},ua=[],la=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo.loginname?n("div",{staticClass:"wu-user"},[n("nav-bar",{on:{leftClick:function(e){t.$router.go(-1)},rightClick:t.logout}},[t.my?t._e():n("icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t.my?n("span",{staticClass:"wu-user-logout",attrs:{slot:"right"},slot:"right"},[t._v("注销")]):t._e(),t._v("\n    "+t._s(t.my?t.my:"用户信息")+"\n  ")],1),n("div",{staticClass:"wu-user-container"},[n("div",{staticClass:"wu-user-container__header"},[n("img",{attrs:{src:t.userInfo.avatar_url,alt:""}}),n("div",{staticClass:"wu-user-container__header-info"},[n("div",{staticClass:"wu-user-container__header-nickname"},[t._v(t._s(t.userInfo.loginname))]),n("div",{staticClass:"wu-user-container__header-score"},[t._v(t._s(t.userInfo.score)+"积分")])]),n("span",{staticClass:"wu-user-container__header-time"},[t._v("注册时间"+t._s(t.ago(t.userInfo.create_at))+" ")])]),n("tabs",{model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tabs-item",{attrs:{id:"replies"}},[t._v("参与的话题")]),n("tabs-item",{attrs:{id:"topics"}},[t._v("发布的话题")]),n("tabs-item",{attrs:{id:"collect"}},[t._v("收藏")])],1),n("tab-container",{ref:"content",on:{scroll:t.handerScroll},model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tab-container-item",{staticClass:"wu-user-replies",attrs:{id:"replies"}},[t._l(t.userInfo.recent_replies,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_replies.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),n("tab-container-item",{staticClass:"wu-user-topics",attrs:{id:"topics"}},[t._l(t.userInfo.recent_topics,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_topics.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),"collect"===t.userTab?n("tab-container-item",{attrs:{id:"collect"}},[t.userInfo.collect.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1),t.userInfo.collect.length?n("div",{staticClass:"wu-user__collect"},t._l(t.userInfo.collect,function(e,a){return n("router-link",{key:a,attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)})):t._e()]):t._e()],1)],1)],1):t._e()},pa=[],da=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:t.path.details(t.topics.id)}},[n("div",{staticClass:"wu-topics-item"},[n("div",{staticClass:"wu-topics-item__container"},[n("img",{attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"wu-topics-item__container__body"},[n("div",{staticClass:"wu-topics-item__container__body-title"},[t._v(t._s(t.topics.title))]),n("div",{staticClass:"wu-topics-item__container__body-author"},[t._v(t._s(t.topics.author.loginname)+"\n          "),n("span",{staticClass:"wu-topics-item__container__body-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])])])])},ba=[],fa=n("6f07"),va=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(sa="undefined"!==typeof fa["RecentInfo"]&&fa["RecentInfo"])?sa:Object)],va.prototype,"topics",void 0),va=O["a"]([Object(j["a"])({mixins:[te],inject:["path"]})],va);var ha=va,_a=ha,ma=(n("1cc0"),Object(C["a"])(_a,da,ba,!1,null,null,null));ma.options.__file="index.vue";var ga,Oa,ja=ma.exports,ya=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.currentScrollTop=0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.userInfo.loginname,!t.t0){t.next=4;break}return t.next=4,this.getUserInfo(this.loginname);case 4:this.init(),this.$refs.content.$el.scrollTop=this.user.scroll;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"init",value:function(){this.$refs.content.$el.setAttribute("style","height:".concat(this.userContainerHeight(),"px"))}},{key:"userContainerHeight",value:function(){var t=[".wu-navbar",".wu-user-container__header",".wu-tabs"],e=[".wu-user .wu-navbar",".wu-user-container__header",".wu-user .wu-tabs",".wu-tabbar"],n=this.my?xe(e):xe(t);return $e-n}},{key:"handerScroll",value:function(t){var e=t.srcElement,n=(e.clientHeight,e.scrollTop);e.scrollHeight;this.currentScrollTop=n}},{key:"destroyed",value:function(){this.updateUserScroll(this.currentScrollTop)}},{key:"userInfo",get:function(){var t=this;return this.users.filter(function(e){return e.loginname===t.loginname})[0]||{}}},{key:"userTab",get:function(){return this.user.tab},set:function(t){this.userTab!==t&&("collect"===t&&!this.userInfo.collect.length&&this.getUserCollect(this.loginname),this.changeUserTab(t))}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],ya.prototype,"loginname",void 0),O["a"]([Object(j["b"])(),O["b"]("design:type",String)],ya.prototype,"my",void 0),O["a"]([Object(we["a"])(An),O["b"]("design:type",Function)],ya.prototype,"getUserInfo",void 0),O["a"]([Object(we["a"])(Pn),O["b"]("design:type",Function)],ya.prototype,"changeUserTab",void 0),O["a"]([Object(we["a"])(Hn),O["b"]("design:type",Function)],ya.prototype,"updateUserScroll",void 0),O["a"]([Object(we["a"])(qn),O["b"]("design:type",Function)],ya.prototype,"logout",void 0),O["a"]([Object(we["a"])(Dn),O["b"]("design:type",Function)],ya.prototype,"getUserCollect",void 0),O["a"]([Object(we["b"])(function(t){return t.user.users}),O["b"]("design:type","function"===typeof(ga="undefined"!==typeof Array&&Array)?ga:Object)],ya.prototype,"users",void 0),O["a"]([Object(we["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(Oa="undefined"!==typeof fa["UserState"]&&fa["UserState"])?Oa:Object)],ya.prototype,"user",void 0),ya=O["a"]([Object(j["a"])({components:{NavBar:Nt,Icon:lt,Tabs:qt,TabsItem:Xt,TabContainer:_t,TabContainerItem:kt,TopicsItem:ja,TopicsCard:ve},mixins:[te],inject:["path"]})],ya);var wa=ya,ka=wa,Ca=(n("51b3"),Object(C["a"])(ka,la,pa,!1,null,null,null));Ca.options.__file="index.vue";var Ta,xa=Ca.exports,Sa=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.accessToken="",t}return Object(_["a"])(e,[{key:"handlerLogin",value:function(){var t=this;this.accessToken?Nn(this.accessToken).then(function(e){return e.success&&t.userLogin(Object.assign({},e,{accessToken:t.accessToken,localToken:t.accessToken}))}):yn.show("请输入用户令牌")}},{key:"mounted",value:function(){var t=this,e=this.user.localToken;!this.user.accessToken&&e&&Nn(e).then(function(n){return n.success&&t.userLogin(Object.assign({},n,{accessToken:e,localToken:e}))})}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(we["a"])(Mn),O["b"]("design:type",Function)],Sa.prototype,"userLogin",void 0),O["a"]([Object(we["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(Ta="undefined"!==typeof fa["UserState"]&&fa["UserState"])?Ta:Object)],Sa.prototype,"user",void 0),Sa=O["a"]([Object(j["a"])({components:{NavBar:Nt,User:xa}})],Sa);var $a=Sa,Ia=$a,Ea=(n("5442"),Object(C["a"])(Ia,ra,ua,!1,null,null,null));Ea.options.__file="index.vue";var Ra,Na=Ea.exports,La=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-message"},[n("nav-bar",[t._v("消息中心")]),n("div",{staticClass:"wu-message-container"},[t.user.localToken?t._l(t.user.message,function(t,e){return n("message-item",{key:e,attrs:{message:t}})}):[n("span",{staticClass:"wu-message-notLogin"},[t._v("请登录")])]],2)],1)},Ua=[],Aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-messageItem"},[n("div",{staticClass:"wu-messageItem-container"},[n("img",{staticClass:"wu-messageItem-container-avatar",attrs:{src:t.message.author.avatar_url}}),n("div",{staticClass:"wu-messageItem-container-content"},[n("router-link",{attrs:{to:t.path.user(t.message.author.loginname)}},[n("span",[t._v(t._s(t.message.author.loginname))])]),t._v(" "+t._s("reply"===t.message.type?"回复了你的话题":"在话题")+"\n      "),n("router-link",{attrs:{to:t.path.details(t.message.topic.id)}},[n("span",[t._v(t._s(t.message.topic.title))])]),t._v(" "+t._s("at"===t.message.type?"中@了你":"")+"\n      "),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-messageItem-container-reply",domProps:{innerHTML:t._s(t.message.reply.content)}}),n("div",{staticClass:"wu-messageItem-container-time"},[t._v(t._s(t.ago(t.message.create_at)))])],1)])])},Pa=[],Ha=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(Ra="undefined"!==typeof fa["MessageInfo"]&&fa["MessageInfo"])?Ra:Object)],Ha.prototype,"message",void 0),Ha=O["a"]([Object(j["a"])({mixins:[te],inject:["path"]})],Ha);var Ma=Ha,qa=Ma,Fa=(n("8331"),Object(C["a"])(qa,Aa,Pa,!1,null,null,null));Fa.options.__file="message-item.vue";var Da,Ba=Fa.exports,Ga=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=$e-xe([".wu-message .wu-navbar",".wu-tabbar"]);Se(".wu-message-container","style","height:".concat(t,"px"));var e=this.user.localToken||this.user.accessToken;e&&!this.user.message.length&&this.getMessage(e),e&&Un()}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(we["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(Da="undefined"!==typeof fa["UserState"]&&fa["UserState"])?Da:Object)],Ga.prototype,"user",void 0),O["a"]([Object(we["a"])(Fn),O["b"]("design:type",Function)],Ga.prototype,"getMessage",void 0),Ga=O["a"]([Object(j["a"])({components:{NavBar:Nt,MessageItem:Ba}})],Ga);var Wa=Ga,Ja=Wa,Qa=(n("16c5"),Object(C["a"])(Ja,La,Ua,!1,null,null,null));Qa.options.__file="index.vue";var Xa,Va=Qa.exports,Ya=[{id:"home",value:"首页"},{id:"edit",value:"发布"},{id:"message",value:"消息"},{id:"user",value:"我的"}],za=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tabbars=Ya,t}return Object(_["a"])(e,[{key:"mounted",value:function(){}},{key:"tabbar",get:function(){return this._tabbar},set:function(t){this.tabbar!==t&&this.changeTabBar(t)}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(we["a"])(ge),O["b"]("design:type",Function)],za.prototype,"changeTabBar",void 0),O["a"]([Object(we["b"])(function(t){return t.topics.tabbar}),O["b"]("design:type",String)],za.prototype,"_tabbar",void 0),za=O["a"]([Object(j["a"])({components:(Xa={},Object(q["a"])(Xa,X.name,X),Object(q["a"])(Xa,nt.name,nt),Object(q["a"])(Xa,lt.name,lt),Object(q["a"])(Xa,_t.name,_t),Object(q["a"])(Xa,kt.name,kt),Object(q["a"])(Xa,oa.name,oa),Object(q["a"])(Xa,Na.name,Na),Object(q["a"])(Xa,Va.name,Va),Object(q["a"])(Xa,Ue.name,Ue),Xa),inject:["path"]})],za);var Ka=za,Za=Ka,ti=(n("3251"),Object(C["a"])(Za,H,M,!1,null,null,null));ti.options.__file="index.vue";var ei,ni=ti.exports,ai=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.details.author?n("div",{staticClass:"wu-topics-details"},[n("nav-bar",{staticClass:"wu-topics-details__navbar",on:{leftClick:function(e){t.$router.go(-1)}}},[n("Icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t._v("主题详情\n  ")],1),n("div",{ref:"details",staticClass:"wu-topics-details__container",on:{scroll:t.handlerScroll}},[n("div",{staticClass:"wu-topics-details__title"},[t._v(t._s(t.details.title))]),n("div",{staticClass:"wu-topics-details__header"},[n("img",{staticClass:"wu-topics-details__header-avatar",attrs:{src:t.details.author.avatar_url,alt:"avatar"}}),n("span",{staticClass:"wu-topics-details__header-nickname"},[n("router-link",{attrs:{to:t.path.user(t.details.author.loginname)}},[t._v(t._s(t.details.author.loginname))])],1),n("span",{staticClass:"wu-topics-details__header-text"},[t._v(t._s("发布于"+t.ago(t.details.create_at)))])]),n("div",{staticClass:"wu-topics-details__body"},[n("div",{staticClass:"wu-topics-details__body-left"},[n("span",[t._v("阅读数："+t._s(t.details.visit_count))]),n("span",[t._v("回复数："+t._s(t.details.reply_count))])]),n("span",{class:t.collectCls,on:{click:t.handlerCollect}},[t._v(t._s(t.details.is_collect?"取消收藏":"收藏"))])]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-topics-details__content",domProps:{innerHTML:t._s(t.details.content)}}),n("div",{staticClass:"wu-topics-details__replies"},[t.user.accessToken||t.user.localToken?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{maxlength:"150",placeholder:"我来说一句"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),n("div",{staticClass:"wu-topics-details-submit"},[n("span",{on:{click:t.handlerSubmit}},[t._v("评论")])])]):n("div",{staticClass:"wu-topics-details__notLogin"},[t._v("\n        请登录后再来评论\n      ")])]),t.replies.length?n("replies",{attrs:{replies:t.replies}}):n("div",{staticClass:"wu-topics-details__notReplies"},[t._v("\n      还没有评论，快来抢沙发\n    ")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.details.scrollTop=0}}})],1):t._e()},ii=[],ci=n("c93e"),si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-topic-details-comment"},[n("div",{staticClass:"wu-topic-details-comment__header"},[t._v("共有"+t._s(t.replies.length)+"条留言")]),t._l(t.replies,function(e,a){return n("replie",{key:a,attrs:{replie:e}},[t._v(t._s(a+1))])})],2)},oi=[],ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card",{staticClass:"wu-topic-details__replie"},[n("div",{staticClass:"wu-topic-details__replie__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"wu-topic-details__replie-avatar",attrs:{src:t.replie.author.avatar_url}}),n("span",{staticClass:"wu-topic-details__replie-nickname"},[n("router-link",{attrs:{to:t.path.user(t.replie.author.loginname)}},[t._v(t._s(t.replie.author.loginname))])],1),t.replie.is_author?n("span",{staticClass:"wu-topic-details__replie-author"},[t._v("作者")]):t._e(),n("span",{staticClass:"wu-topic-details__replie-floor"},[t._t("default"),t._v("楼")],2)]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{slot:"body"},domProps:{innerHTML:t._s(t.replie.content)},slot:"body"}),n("div",{staticClass:"wu-topic-details__replie__footer",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"wu-topic-details__replie-time"},[t._v(t._s(t.ago(t.replie.create_at)))]),t.replie.ups.length?n("span",{staticClass:"wu-topic-details__replie-uped"},[n("icon",{attrs:{type:"like"}}),t._v(t._s(t.replie.ups.length)+"\n    ")],1):t._e()])])},ui=[],li=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(ei="undefined"!==typeof zt["RepliesInfo"]&&zt["RepliesInfo"])?ei:Object)],li.prototype,"replie",void 0),li=O["a"]([Object(j["a"])({components:{Card:re,Icon:lt},mixins:[te],inject:["path"]})],li);var pi=li,di=pi,bi=(n("7ea8"),Object(C["a"])(di,ri,ui,!1,null,null,null));bi.options.__file="replie.vue";var fi,vi=bi.exports,hi=function(t){function e(){return Object(b["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type","function"===typeof(fi="undefined"!==typeof Array&&Array)?fi:Object)],hi.prototype,"replies",void 0),hi=O["a"]([Object(j["a"])({components:{Replie:vi}})],hi);var _i=hi,mi=_i,gi=(n("8a8f"),Object(C["a"])(mi,si,oi,!1,null,null,null));gi.options.__file="index.vue";var Oi,ji,yi,wi=gi.exports,ki="wu-topics-details",Ci=function(t){function e(){var t;return Object(b["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.scroll=0,t.showTop=!1,t.comment="",t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(kn["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.details.author,!t.t0){t.next=4;break}return t.next=4,this.getTopicDetails(this.topic);case 4:this.details.scroll>200&&(this.showTop=!0),e=$e-Te(".wu-navbar","clientHeight"),Se(".".concat(ki,"__container"),"style","height:".concat(e,"px")),this.$refs.details.scrollTop=this.details.scroll;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handlerScroll",value:function(t){var e=t.srcElement.scrollTop;this.scroll=e,this.showTop=e>200}},{key:"handlerCollect",value:function(){var t=this;this.user.localToken?this.collect().then(function(e){t.changeCollect({topic:t.topic,result:e})}):yn.show("请登录")}},{key:"collect",value:function(){var t=this.user.accessToken,e=this.details.id,n={accesstoken:t,topic_id:e};return this.details.is_collect?Rn(n):En(n)}},{key:"handlerSubmit",value:function(){var t=this.comment,e=this.topic,n=this.getTopicDetails;t?ea({content:t,topic_id:e}).then(function(t){t.success&&yn.show("评论成功"),n(e)}):yn.show("评论内容不能为空")}},{key:"beforeDestroy",value:function(){var t=this.topic,e=this.scroll;this.setTopicScroll({id:t,scroll:e})}},{key:"details",get:function(){var t=this;return this.openTopics.filter(function(e){return e.id===t.topic})[0]||{}}},{key:"replies",get:function(){var t=this;return this.details.replies.reduce(function(e,n){return t.details.author.loginname===n.author.loginname?e.push(Object(ci["a"])({is_author:!0},n)):e.push(n),e},[])}},{key:"collectCls",get:function(){return["".concat(ki,"__body-collect"),Object(q["a"])({},"".concat(ki,"__body-cancelCollect"),this.details.is_collect)]}}]),Object(h["a"])(e,t),e}(j["c"]);O["a"]([Object(j["b"])(),O["b"]("design:type",String)],Ci.prototype,"topic",void 0),O["a"]([Object(we["b"])(function(t){return t.topics.openTopics}),O["b"]("design:type","function"===typeof(ji="undefined"!==typeof Array&&Array)?ji:Object)],Ci.prototype,"openTopics",void 0),O["a"]([Object(we["b"])(function(t){return t.user}),O["b"]("design:type","function"===typeof(yi="undefined"!==typeof fa["UserState"]&&fa["UserState"])?yi:Object)],Ci.prototype,"user",void 0),O["a"]([Object(we["a"])(_e),O["b"]("design:type",Function)],Ci.prototype,"getTopicDetails",void 0),O["a"]([Object(we["a"])(je),O["b"]("design:type",Function)],Ci.prototype,"setTopicScroll",void 0),O["a"]([Object(we["a"])(ye),O["b"]("design:type",Function)],Ci.prototype,"changeCollect",void 0),Ci=O["a"]([Object(j["a"])({components:(Oi={},Object(q["a"])(Oi,Nt.name,Nt),Object(q["a"])(Oi,"Icon",lt),Object(q["a"])(Oi,"Replies",wi),Oi),mixins:[te],inject:["path"]})],Ci);var Ti=Ci,xi=Ti,Si=(n("6aec"),Object(C["a"])(xi,ai,ii,!1,null,null,null));Si.options.__file="index.vue";var $i=Si.exports;s["default"].use(P["a"]);var Ii=new P["a"]({routes:[{path:"/",name:"Home",component:ni},{path:"/details/:topic",name:"topicDetails",component:$i,props:!0},{path:"/user/:loginname",name:"user",component:xa,props:!0}]}),Ei=(n("f5df"),n("26e2"),function(){return"/"}),Ri=function(t){return"/details/".concat(t)},Ni=function(t){return"/user/".concat(t)},Li=function(){return"/edit"};s["default"].config.productionTip=!1,new s["default"]({el:"#app",router:Ii,store:Qn,render:function(t){return t(A)},provide:{path:c}})},ce00:function(t,e,n){},da3a:function(t,e,n){},dacc:function(t,e,n){},dee0:function(t,e,n){},e0e8:function(t,e,n){"use strict";var a=n("2d9f"),i=n.n(a);i.a},e8e8:function(t,e){},f66a:function(t,e,n){},ffad:function(t,e,n){}});
//# sourceMappingURL=app.d4aaaf1b.js.map