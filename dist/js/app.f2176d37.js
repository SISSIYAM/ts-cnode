(function(t){function e(e){for(var a,c,o=e[0],r=e[1],u=e[2],p=0,d=[];p<o.length;p++)c=o[p],i[c]&&d.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},s=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"026b":function(t,e,n){"use strict";var a=n("77eb"),i=n.n(a);i.a},"02a0":function(t,e,n){},"0a8c":function(t,e,n){},"16c5":function(t,e,n){"use strict";var a=n("5b7d"),i=n.n(a);i.a},"1cc0":function(t,e,n){"use strict";var a=n("f66a"),i=n.n(a);i.a},"20c8":function(t,e,n){},"26e2":function(t,e,n){},2856:function(t,e,n){},"2d9f":function(t,e,n){},"2eff":function(t,e,n){},3343:function(t,e,n){},"34d7":function(t,e,n){"use strict";var a=n("dacc"),i=n.n(a);i.a},"3b2a":function(t,e,n){"use strict";var a=n("0a8c"),i=n.n(a);i.a},"3e69":function(t,e,n){},"438d":function(t,e,n){},"48b8":function(t,e,n){},"4a09":function(t,e,n){},"4dc5":function(t,e,n){"use strict";var a=n("af12"),i=n.n(a);i.a},"51b3":function(t,e,n){"use strict";var a=n("3e69"),i=n.n(a);i.a},5442:function(t,e,n){"use strict";var a=n("438d"),i=n.n(a);i.a},"5b7d":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("2856"),i=n.n(a);i.a},"5e3f":function(t,e,n){"use strict";var a=n("2eff"),i=n.n(a);i.a},"5f5b":function(t,e,n){"use strict";var a=n("48b8"),i=n.n(a);i.a},6641:function(t,e,n){"use strict";var a=n("20c8"),i=n.n(a);i.a},"6aec":function(t,e,n){"use strict";var a=n("02a0"),i=n.n(a);i.a},"6f07":function(t,e){},7514:function(t,e,n){},"77eb":function(t,e,n){},"7ea8":function(t,e,n){"use strict";var a=n("b77a"),i=n.n(a);i.a},8331:function(t,e,n){"use strict";var a=n("7514"),i=n.n(a);i.a},"8a8f":function(t,e,n){"use strict";var a=n("dee0"),i=n.n(a);i.a},a492:function(t,e,n){},a775:function(t,e,n){"use strict";var a=n("b194"),i=n.n(a);i.a},af12:function(t,e,n){},b0ee:function(t,e,n){"use strict";var a=n("4a09"),i=n.n(a);i.a},b194:function(t,e,n){},b3a8:function(t,e,n){"use strict";var a=n("a492"),i=n.n(a);i.a},b77a:function(t,e,n){},bed9:function(t,e,n){"use strict";var a=n("da3a"),i=n.n(a);i.a},c5c6:function(t,e,n){"use strict";var a=n("3343"),i=n.n(a);i.a},cc79:function(t,e,n){"use strict";var a=n("ffad"),i=n.n(a);i.a},cd49:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"state",function(){return Tn}),n.d(a,"actions",function(){return kn}),n.d(a,"mutations",function(){return Cn}),n.d(a,"getters",function(){return xn});var i={};n.r(i),n.d(i,"state",function(){return Bn}),n.d(i,"actions",function(){return Fn}),n.d(i,"mutations",function(){return Gn}),n.d(i,"getters",function(){return Xn});var s={};n.r(s),n.d(s,"home",function(){return Si}),n.d(s,"details",function(){return Ii}),n.d(s,"user",function(){return $i}),n.d(s,"edit",function(){return Ei});n("cadf"),n("551c"),n("097d");var c=n("2b0e"),o=(n("ac6a"),n("a70e")),r=n.n(o),u=n("4dd1"),l=n.n(u);n("9f21");r.a.registerLanguage("javascript",l.a),c["default"].directive("highlight",function(t){var e=t.querySelectorAll("pre code");e.length&&e.forEach(function(t){r.a.highlightBlock(t)})});var p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},d=[],h=(n("a481"),n("c665")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"wu-imgView",on:{click:function(e){t.show=!1}}},[n("img",{attrs:{src:t.src}})]):t._e()},f=[],v=n("dc0a"),_=n("aa9a"),m=n("d328"),g=n("11d9"),y=n("9ab4"),O=n("60a3"),j=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.$nextTick(function(){t.$el.scrollLeft=(t.$el.scrollWidth-t.$el.clientWidth)/2})}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],j.prototype,"src",void 0),j=y["a"]([O["a"]],j);var w=j,T=w,k=(n("a775"),n("2877")),C=Object(k["a"])(T,b,f,!1,null,null,null);C.options.__file="img-view.vue";var x=C.exports,S=c["default"].extend(x),I=document.createElement("div"),$=function t(e){Object(h["a"])(this,t),document.body.appendChild(new S({el:I,propsData:{src:e}}).$el)},E=function(t){return new $(t)},R=function(){document.querySelector("#app").addEventListener("click",function(t){var e=t||window.event,n=e.target,a=n.host===window.location.host;if("a"===n.nodeName.toLowerCase()&&a&&~n.textContent.indexOf("@")){var i=n.textContent.replace("@","");t.preventDefault(),window.location.href="".concat(window.location.origin).concat(window.location.pathname,"#/user/").concat(i)}"img"===n.nodeName.toLowerCase()&&E(n.currentSrc)})},L={mounted:function(){R()}},N=L,U=(n("5c0b"),Object(k["a"])(N,p,d,!1,null,null,null));U.options.__file="App.vue";var H=U.exports,M=n("8c4f"),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("tab-container",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},[n("tab-container-item",{attrs:{id:"home"}},[n("home")],1),n("tab-container-item",{attrs:{id:"edit"}},[n("edit")],1),n("tab-container-item",{attrs:{id:"user"}},["user"===t.tabbar?n("login"):t._e()],1),n("tab-container-item",{attrs:{id:"message"}},["message"===t.tabbar?n("message"):t._e()],1)],1),n("tab-bar",{model:{value:t.tabbar,callback:function(e){t.tabbar=e},expression:"tabbar"}},t._l(t.tabbars,function(e){return n("tab-bar-tab",{key:e.id,attrs:{id:e.id}},[n("Icon",{attrs:{slot:"icon",type:e.id},slot:"icon"}),t._v(t._s(e.value)+"\n    ")],1)}))],1)},D=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className},[t._t("default")],2)},q=[],B="wu-tabbar",F=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(B),"".concat(B,"-").concat(this.tabbarPosition)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])({default:"bottom"}),y["b"]("design:type",String)],F.prototype,"tabbarPosition",void 0),y["a"]([Object(O["b"])(),y["b"]("design:type",String)],F.prototype,"value",void 0),F=y["a"]([O["a"]],F);var G=F,X=G,W=(n("cc79"),Object(k["a"])(X,P,q,!1,null,null,null));W.options.__file="index.vue";var J=W.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.tabbarTabCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("div",{staticClass:"wu-tabbar-tab-icon"},[t._t("icon")],2),n("div",{staticClass:"wu-tabbar-tab-title"},[t._t("default")],2)])},V=[],Y=n("a322"),z="wu-tabbar-tab",K=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"tabbarTabCls",get:function(){return["".concat(z),Object(Y["a"])({},"".concat(z,"-is-selected"),this.$parent.value===this.id)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],K.prototype,"id",void 0),K=y["a"]([O["a"]],K);var Z=K,tt=Z,et=(n("026b"),Object(k["a"])(tt,Q,V,!1,null,null,null));et.options.__file="index.vue";var nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:t.className})},it=[],st="iconfont",ct=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(st),"icon-".concat(this.type)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],ct.prototype,"type",void 0),ct=y["a"]([O["a"]],ct);var ot=ct,rt=ot,ut=Object(k["a"])(rt,at,it,!1,null,null,null);ut.options.__file="index.vue";var lt=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tab-container",on:{scroll:t.handlerScroll,touchmove:t.handlerTouchmove,touchstart:t.handlerTouchstart,touchend:t.handlerTouchend}},[t._t("default")],2)},dt=[],ht=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){this.$emit("scroll",t)}},{key:"handlerTouchmove",value:function(t){this.$emit("touchmove",t)}},{key:"handlerTouchstart",value:function(t){this.$emit("touchstart",t)}},{key:"handlerTouchend",value:function(t){this.$emit("touchend",t)}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],ht.prototype,"value",void 0),ht=y["a"]([O["a"]],ht);var bt=ht,ft=bt,vt=(n("b0ee"),Object(k["a"])(ft,pt,dt,!1,null,null,null));vt.options.__file="index.vue";var _t=vt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.id===t.$parent.value,expression:"id === $parent.value"}],staticClass:"wu-tab-container-item"},[t._t("default")],2)},gt=[],yt=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],yt.prototype,"id",void 0),yt=y["a"]([O["a"]],yt);var Ot=yt,jt=Ot,wt=(n("b3a8"),Object(k["a"])(jt,mt,gt,!1,null,null,null));wt.options.__file="index.vue";var Tt=wt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-home"},[n("nav-bar",[t._v("首页")]),n("div",{staticClass:"content"},[n("tabs",{model:{value:t.topicsTab,callback:function(e){t.topicsTab=e},expression:"topicsTab"}},t._l(t.topicTabs,function(e){return n("tabs-item",{key:e.id,attrs:{id:e.id}},[t._v(t._s(e.value))])})),n("tab-container",{ref:"topicsContent",staticClass:"topics__item",style:t.styContent,on:{scroll:t.handlerScroll,touchmove:t.handlerTouchmove,touchstart:t.handlerTouchStart,touchend:t.handlerTouchend}},[t._l(t.topics,function(e,a){return n("tab-container-item",{key:a,staticClass:"tab__container__item"},[n("router-link",{attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)],1)}),t.isShowSlideTips?n("div",{class:t.notTab},[t._v("别闹")]):t._e()],2)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.topicsContent.$el.scrollTop=0}}})],1)},Ct=[],xt=(n("c5f6"),n("20d6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-navbar"},[n("div",{staticClass:"wu-navbar-left",on:{click:function(e){t.$emit("leftClick")}}},[t._t("left")],2),n("div",{staticClass:"wu-navbar-content"},[t._t("default")],2),n("div",{staticClass:"wu-navbar-right",on:{click:function(e){t.$emit("rightClick")}}},[t._t("right")],2)])}),St=[],It=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);It=y["a"]([O["a"]],It);var $t=It,Et=$t,Rt=(n("4dc5"),Object(k["a"])(Et,xt,St,!1,null,null,null));Rt.options.__file="index.vue";var Lt=Rt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-tabs"},[t._t("default")],2)},Ut=[],Ht=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Ht.prototype,"value",void 0),Ht=y["a"]([O["a"]],Ht);var Mt=Ht,At=Mt,Dt=(n("6641"),Object(k["a"])(At,Nt,Ut,!1,null,null,null));Dt.options.__file="index.vue";var Pt=Dt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.className,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[t._t("default")],2)},Bt=[],Ft="wu-tabs-item",Gt=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"className",get:function(){return["".concat(Ft),Object(Y["a"])({},"".concat(Ft,"-selected"),this.id===this.$parent.value)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Gt.prototype,"id",void 0),Gt=y["a"]([O["a"]],Gt);var Xt=Gt,Wt=Xt,Jt=(n("e0e8"),Object(k["a"])(Wt,qt,Bt,!1,null,null,null));Jt.options.__file="index.vue";var Qt=Jt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"topics__card"},[n("div",{staticClass:"topics__item__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"topics__item-avatar",attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"topics__item__header__container"},[n("div",{staticClass:"topics__item__header__container-nickname"},[t._v(t._s(t.topics.author.loginname))]),t.topics.top?n("Icon",{attrs:{type:"hot"}}):t._e(),t.topics.good?n("Icon",{attrs:{type:"good"}}):t._e(),n("div",{staticClass:"topics__item__header__container-text"},[t._v(t._s(t.topicsHeaderText))])],1)]),n("div",{staticClass:"topics__item__body",attrs:{slot:"body"},slot:"body"},[t._v("\n    "+t._s(t.topics.title)+"\n  ")]),n("div",{staticClass:"topics__item__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",[n("Icon",{attrs:{type:"chakan"}}),t._v(t._s(t.topics.visit_count)+" ")],1),n("div",[n("Icon",{attrs:{type:"comment"}}),t._v(t._s(t.topics.reply_count))],1),n("div",{staticClass:"topics__item__footer-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])},Yt=[],zt=n("e8e8");function Kt(t){var e=(new Date).getTime()-new Date(t).getTime(),n=Math.floor(e/864e5),a=e%864e5,i=Math.floor(a/36e5),s=a%36e5,c=Math.floor(s/6e4),o=s%6e4,r=Math.round(o/1e3);return 0!==n?n>365?"".concat(Math.floor(n/365),"年前"):n>30?"".concat(Math.floor(n/30),"月前"):n<0?"刚刚":"".concat(n,"天前"):0!==i?"".concat(i,"小时前"):0!==c?"".concat(c,"分钟前"):0!==r?"".concat(r,"秒前"):0===r?"刚刚":void 0}function Zt(t){switch(t){case"share":return"分享";case"ask":return"问答";case"good":return"精华";case"job":return"招聘";default:return""}}var te={methods:{ago:Kt,getTab:Zt}},ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-card"},[n("div",{staticClass:"wu-card-container"},[n("div",{staticClass:"wu-card__header"},[t._t("header")],2),n("div",{staticClass:"wu-card__body"},[t._t("body")],2),n("div",{staticClass:"wu-card__footer"},[t._t("footer")],2)])])},ne=[],ae=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);ae=y["a"]([O["a"]],ae);var ie=ae,se=ie,ce=(n("bed9"),Object(k["a"])(se,ee,ne,!1,null,null,null));ce.options.__file="index.vue";var oe,re=ce.exports,ue=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"topicsHeaderText",get:function(){return"".concat(this.ago(this.topics.create_at),"发布至").concat(this.getTab(this.topics.tab))}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type","function"===typeof(oe="undefined"!==typeof zt["TopicInfo"]&&zt["TopicInfo"])?oe:Object)],ue.prototype,"topics",void 0),ue=y["a"]([Object(O["a"])({components:{Card:re,Icon:lt},mixins:[te]})],ue);var le=ue,pe=le,de=(n("3b2a"),Object(k["a"])(pe,Vt,Yt,!1,null,null,null));de.options.__file="index.vue";var he,be=de.exports,fe="REQUEST__TOPICS",ve="REQUEST__TOPIC__DETAILS",_e="TOPICS__CHANGE__TAB",me="CHANGE__TABBAR",ge="SET__TOPICS__SCROLL",ye="SET__TOPIC__SCROLL",Oe="CHANGE__COLLECT",je=n("4bb5"),we=function(t,e){return window.localStorage.setItem(t,e)},Te=function(t){return window.localStorage.getItem(t)},ke=function(t,e){return document.querySelector(t)[e]},Ce=function(t){return t.reduce(function(t,e){return t+ke(e,"clientHeight")},0)},xe=function(t,e,n){return document.querySelector(t).setAttribute(e,n)},Se=document.documentElement.clientHeight,Ie=[{id:"all",value:"全部"},{id:"good",value:"精华"},{id:"share",value:"分享"},{id:"ask",value:"问答"},{id:"job",value:"招聘"}],$e=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.page=1,t.showTop=!1,t.currentScrollTop=0,t.topicTabs=Ie,t.touchstart=0,t.touchend=0,t.contentH=0,t.touchRight=null,t.touchLeft=null,t}return Object(_["a"])(e,[{key:"handlerScroll",value:function(t){var e=t.srcElement,n=e.clientHeight,a=e.scrollTop,i=e.scrollHeight;this.currentScrollTop=a;var s=i-a===n;this.showTop=a>400,s&&this.topics.length&&++this.page&&this.requestTopics({tab:this.topicsTab,page:this.page})}},{key:"handlerTouchStart",value:function(t){this.touchstart=t.touches[0].pageX}},{key:"handlerTouchmove",value:function(t){this.touchend=t.touches[0].pageX,Math.abs(this.calcTouchDist)<15||(this.calcTouchDist>0?this.touchRight=this.calcTouchDist:this.touchLeft=Math.abs(this.calcTouchDist))}},{key:"handlerTouchend",value:function(t){var e=window.screen.width/3,n=Math.abs(this.calcTouchDist)>e;n&&this.touchend>0?this.touchSwitchTab():this.resetTouch()}},{key:"touchSwitchTab",value:function(){var t;return 0===this.tabIndex&&this.calcTouchDist<0?this.resetTouch():this.tabIndex===Ie.length-1&&this.calcTouchDist>0?this.resetTouch():(t=this.calcTouchDist>0?Ie[this.tabIndex+1].id:Ie[this.tabIndex-1].id,this.topicsTab=t,void this.resetTouch())}},{key:"resetTouch",value:function(){this.touchLeft=null,this.touchRight=null}},{key:"mounted",value:function(){!this.topics.length&&this.requestTopics(),this.init(),this.$refs.topicsContent.$el.scrollTop=this.scroll}},{key:"init",value:function(){var t=[".wu-tabbar",".wu-navbar",".wu-tabs"],e=Se-Ce(t);this.contentH=e}},{key:"beforeDestroy",value:function(){this.setTopicsScroll(this.currentScrollTop)}},{key:"calcTouchDist",get:function(){return this.touchstart-this.touchend}},{key:"topicsTab",get:function(){return this.currentTab},set:function(t){this.page=1,this.topicsChangeTab(t),this.requestTopics({tab:t,page:1})}},{key:"styContent",get:function(){return{height:"".concat(this.contentH,"px"),right:this.touchRight?"".concat(this.touchRight,"px"):null,left:this.touchLeft?"".concat(this.touchLeft,"px"):null}}},{key:"notTab",get:function(){var t;return["topics__item-notab",(t={},Object(Y["a"])(t,"topics__item-notab-left",0===this.tabIndex),Object(Y["a"])(t,"topics__item-notab-right",this.tabIndex===Ie.length-1),t)]}},{key:"isShowSlideTips",get:function(){return 0===this.tabIndex||this.tabIndex===Ie.length-1}},{key:"tabIndex",get:function(){var t=this;return Ie.findIndex(function(e){return e.id===t.topicsTab})}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(je["a"])(fe),y["b"]("design:type",Function)],$e.prototype,"requestTopics",void 0),y["a"]([Object(je["a"])(_e),y["b"]("design:type",Function)],$e.prototype,"topicsChangeTab",void 0),y["a"]([Object(je["a"])(ge),y["b"]("design:type",Function)],$e.prototype,"setTopicsScroll",void 0),y["a"]([Object(je["b"])(function(t){return t.topics.topics}),y["b"]("design:type","function"===typeof(he="undefined"!==typeof Array&&Array)?he:Object)],$e.prototype,"topics",void 0),y["a"]([Object(je["b"])(function(t){return t.topics.topicsScroll}),y["b"]("design:type",Number)],$e.prototype,"scroll",void 0),y["a"]([Object(je["b"])(function(t){return t.topics.currentTab}),y["b"]("design:type",String)],$e.prototype,"currentTab",void 0),$e=y["a"]([Object(O["a"])({components:{TabContainer:_t,TabContainerItem:Tt,NavBar:Lt,Tabs:Pt,TabsItem:Qt,TopicsCard:be},inject:["path"]})],$e);var Ee=$e,Re=Ee,Le=(n("34d7"),Object(k["a"])(Re,kt,Ct,!1,null,null,null));Le.options.__file="index.vue";var Ne=Le.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-edit"},[n("nav-bar",{on:{rightClick:t.handlerSubmit}},[t._v("新建主题\n    "),n("span",{attrs:{slot:"right"},slot:"right"},[t._v("发布")])]),n("div",{staticClass:"wu-edit-container"},[n("div",{staticClass:"wu-edit-container__title"},[n("icon",{attrs:{type:"title"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__content"},[n("icon",{attrs:{type:"content"}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"30",rows:"5",placeholder:"请输入内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})],1),n("div",{staticClass:"wu-edit-container__tab"},[n("icon",{attrs:{type:"classify"}}),n("span",{staticClass:"wu-edit-container__tab-title"},[t._v("选择分类")])],1),n("Labels",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("label-item",{attrs:{id:"share",label:"分享"}}),n("label-item",{attrs:{id:"ask",label:"问答"}}),n("label-item",{attrs:{id:"job",label:"招聘"}}),n("label-item",{attrs:{id:"dev",label:"开发"}})],1)],1)],1)},He=[],Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-label"},[t._t("default")],2)},Ae=[],De=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],De.prototype,"value",void 0),De=y["a"]([O["a"]],De);var Pe=De,qe=Pe,Be=Object(k["a"])(qe,Me,Ae,!1,null,null,null);Be.options.__file="index.vue";var Fe=Be.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.labelItemCls,on:{click:function(e){t.$parent.$emit("input",t.id)}}},[n("span",[t._v(t._s(t.label))])])},Xe=[],We="wu-label-item",Je=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"labelItemCls",get:function(){return["".concat(We),Object(Y["a"])({},"".concat(We,"-selected"),this.$parent.value===this.id)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Je.prototype,"id",void 0),y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Je.prototype,"label",void 0),Je=y["a"]([O["a"]],Je);var Qe=Je,Ve=Qe,Ye=(n("c5c6"),Object(k["a"])(Ve,Ge,Xe,!1,null,null,null));Ye.options.__file="index.vue";var ze=Ye.exports,Ke=(n("f751"),n("bc3a")),Ze=n.n(Ke),tn="https://cnodejs.org/api/v1/",en={},nn=["Null","Array","String","Object","Number","Boolean","Function","Undefined"];nn.map(function(t){return en["is".concat(t)]=function(e){return toString.call(e)==="[object ".concat(t,"]")}});var an=en,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toast"}},[t.show?n("div",{class:t.toast},[t.isLoading?n("div",{class:t.iconCls}):t._e(),n("div",{staticClass:"wu-toast-content"},[t._v("\n      "+t._s(t.message)+"\n    ")])]):t._e()])},cn=[],on="wu-toast",rn=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.show=!0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.duration>0&&setTimeout(function(){t.show=!t.show},this.duration)}},{key:"iconCls",get:function(){return["iconfont",Object(Y["a"])({},"loading",this.isLoading)]}},{key:"toast",get:function(){return["".concat(on),"".concat(on,"-").concat(this.position)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],rn.prototype,"message",void 0),y["a"]([Object(O["b"])({default:3e3}),y["b"]("design:type",Number)],rn.prototype,"duration",void 0),y["a"]([Object(O["b"])({default:!1}),y["b"]("design:type",Boolean)],rn.prototype,"isLoading",void 0),y["a"]([Object(O["b"])({default:"center"}),y["b"]("design:type",String)],rn.prototype,"position",void 0),rn=y["a"]([Object(O["a"])({components:{Icon:lt}})],rn);var un=rn,ln=un,pn=(n("5f5b"),Object(k["a"])(ln,sn,cn,!1,null,null,null));pn.options.__file="toast.vue";var dn,hn,bn,fn,vn=pn.exports,_n=c["default"].extend(vn),mn=document.createElement("div"),gn=function(t){return an.isObject(t)?t:{message:t}},yn=function(){function t(){Object(h["a"])(this,t),this.queue=[]}return Object(_["a"])(t,[{key:"createToast",value:function(t){var e=gn(t),n=new _n({el:mn,propsData:e});return document.body.appendChild(n.$el),this.queue.push(n),this.queue[this.queue.length-1]}},{key:"show",value:function(t){return this.createToast(t)}},{key:"hide",value:function(){this.queue[this.queue.length-1].show=!1,this.queue.pop()}},{key:"clearAll",value:function(){this.queue.map(function(t){return t.show=!1}),this.queue=[]}},{key:"loading",value:function(t){return this.createToast({isLoading:!0,message:t,duration:0})}}]),t}(),On=new yn,jn=n("2f62"),wn=(n("96cf"),n("3040")),Tn={currentTab:"all",tabbar:"home",topics:[],openTopics:[],topicsScroll:0},kn=(dn={},Object(Y["a"])(dn,fe,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e){var n,a,i,s,c,o,r,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=u.length>1&&void 0!==u[1]?u[1]:{},i=a.tab,s=void 0===i?"all":i,c=a.page,o=void 0===c?1:c,t.next=5,zn(s,o);case 5:r=t.sent,n(fe,r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(Y["a"])(dn,_e,function(t,e){var n=t.commit;n(_e,e)}),Object(Y["a"])(dn,me,function(t,e){var n=t.commit;n(me,e)}),Object(Y["a"])(dn,ve,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Kn(n);case 3:i=t.sent,i=Object.assign({},i,{scroll:0}),a(ve,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(dn,ge,function(t,e){var n=t.commit;n(ge,e)}),Object(Y["a"])(dn,ye,function(t,e){var n=t.commit;n(ye,e)}),Object(Y["a"])(dn,Oe,function(t,e){var n=t.commit;n(Oe,e)}),dn),Cn=(hn={},Object(Y["a"])(hn,fe,function(t,e){t.topics=t.topics.concat(e)}),Object(Y["a"])(hn,_e,function(t,e){t.currentTab=e,t.topics=[],t.topicsScroll=0}),Object(Y["a"])(hn,me,function(t,e){t.tabbar=e}),Object(Y["a"])(hn,ve,function(t,e){var n=!1;t.openTopics.map(function(t){return t.id===e.id&&(n=!0)&&(t.replies=e.replies)}),!n&&t.openTopics.push(e)}),Object(Y["a"])(hn,ge,function(t,e){t.topicsScroll=e}),Object(Y["a"])(hn,ye,function(t,e){t.openTopics.map(function(t){t.id===e.id&&(t.scroll=e.scroll)})}),Object(Y["a"])(hn,Oe,function(t,e){e.result&&t.openTopics.map(function(t){return t.id===e.topic&&(t.is_collect=!t.is_collect)})}),hn),xn={},Sn=function(t){return Vn("user/".concat(t)).then(function(t){return t.data.data})},In=function(t){return Vn("topic_collect/".concat(t)).then(function(t){return t.data.data})},$n=function(t){return Yn("topic_collect/collect",t).then(function(t){return t.data.success})},En=function(t){return Yn("topic_collect/de_collect",t).then(function(t){return t.data.success})},Rn=function(t){return Yn("accesstoken",{accesstoken:t}).then(function(t){return t.data})},Ln=function(t){return Vn("messages",{accesstoken:t}).then(function(t){var e=t.data.data,n=e.has_read_messages,a=e.hasnot_read_messages;return a.concat(n)})},Nn=function(){return Yn("message/mark_all").then(function(t){return t.data})},Un="GET__USER__INFO",Hn="CHANGE__USER__TAB",Mn="UPDATE__USER__SCROLL",An="USER__LOGIN",Dn="USER__LOGOUT",Pn="GET__MY__MESSAGE",qn="GET__USER__COLLECT",Bn={localToken:Te("accessToken"),accessToken:"",users:[],tab:"replies",scroll:0,loginname:"",avatar_url:"",id:"",message:[]},Fn=(bn={},Object(Y["a"])(bn,Un,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Sn(n);case 3:i=t.sent,i["collect"]=[],a(Un,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(bn,Hn,function(t,e){var n=t.commit;n(Hn,e)}),Object(Y["a"])(bn,Mn,function(t,e){var n=t.commit;n(Mn,e)}),Object(Y["a"])(bn,An,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Ln(n.accessToken);case 3:i=t.sent,n.message=i,a(An,n);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(bn,Dn,function(t){var e=t.commit;e(Dn)}),Object(Y["a"])(bn,Pn,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Ln(n);case 3:i=t.sent,a(Pn,i);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Y["a"])(bn,qn,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e,n){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,In(n);case 3:i=t.sent,Object.assign(i,{loginname:n}),a(qn,i);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),bn),Gn=(fn={},Object(Y["a"])(fn,Un,function(t,e){t.tab="replies",t.scroll=0,t.users.push(e)}),Object(Y["a"])(fn,Hn,function(t,e){t.tab=e}),Object(Y["a"])(fn,Mn,function(t,e){t.scroll=e}),Object(Y["a"])(fn,An,function(t,e){Object.assign(t,e),we("accessToken",e.accessToken),we("loginName",e.loginname)}),Object(Y["a"])(fn,Dn,function(t){t.accessToken="",t.localToken="",t.avatar_url="",t.id="",t.loginname="",t.message=[],we("accessToken",""),we("loginName","")}),Object(Y["a"])(fn,Oe,function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,In(e.loginname||Te("loginName"));case 2:n=t.sent,e.users.length&&(e.users[0]["collect"]=n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(Y["a"])(fn,Pn,function(t,e){t.message=e}),Object(Y["a"])(fn,qn,function(t,e){t.users.map(function(t){return t.loginname===e.loginname&&(t.collect=e)})}),fn),Xn={token:function(t){return t.accessToken},localToken:function(t){return t.localToken}};c["default"].use(jn["a"]);var Wn=new jn["a"].Store({modules:{topics:a,user:i}}),Jn=function(){return Wn.getters.localToken||Wn.getters.token},Qn=Ze.a.create({baseURL:tn,timeout:0,headers:{"X-Requested-With":"XMLHttpRequest"},maxContentLength:2e3});Qn.interceptors.request.use(function(t){var e=!!~t.url.indexOf("topics"),n=!!~t.url.indexOf("accesstoken"),a=t.method;return"get"===a&&!t.params&&Jn()&&(t.params=Object.assign({},t.params,{accesstoken:Jn()})),"post"!==a||n||(t.data=Object.assign({},t.data,{accesstoken:Jn()})),e&&"post"===a?On.loading("发布中..."):On.loading("加载中..."),t},function(t){return Promise.reject(t)}),Qn.interceptors.response.use(function(t){return On.hide(),t},function(t){var e=t.response.data&&t.response.data.error_msg;On.hide(),On.show({message:e,duration:5e3})});var Vn=function(t,e){return Qn.get(t,{params:e})},Yn=function(t,e){return Qn.post(t,e)},zn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return Vn("topics",{tab:t,page:e,limit:n}).then(function(t){return t.data.data})},Kn=function(t){return Vn("topic/".concat(t)).then(function(t){return t.data.data})},Zn=function(t){return Yn("topics",t).then(function(t){return t.data})},ta=function(t){var e=t.content,n=t.topic_id;return Yn("topic/".concat(n,"/replies"),{content:e}).then(function(t){return t.data})},ea=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tab="dev",t.title="",t.content="",t}return Object(_["a"])(e,[{key:"handlerSubmit",value:function(){var t=this,e=this.title,n=this.tab,a=this.content,i=this.accesstoken,s=[];if(!i)return On.show("请登录");e||s.push("请输入标题"),a||s.push("请输入内容"),s.length&&On.show(s.join()),e&&a&&i&&Zn({title:e,tab:n,content:a,accesstoken:i}).then(function(e){return e.success&&t.$router.push({path:"/details/".concat(e.topic_id)})})}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(je["b"])(function(t){return t.user.accessToken}),y["b"]("design:type",String)],ea.prototype,"accesstoken",void 0),ea=y["a"]([Object(O["a"])({components:{NavBar:Lt,Icon:lt,Labels:Fe,LabelItem:ze}})],ea);var na=ea,aa=na,ia=(n("5e3f"),Object(k["a"])(aa,Ue,He,!1,null,null,null));ia.options.__file="index.vue";var sa,ca=ia.exports,oa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-login"},[t.user.localToken?[t.user.loginname?n("user",{attrs:{loginname:t.user.loginname,my:"我"}}):t._e()]:[n("nav-bar",[t._v("登录")]),n("div",{staticClass:"wu-login-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accessToken,expression:"accessToken"}],attrs:{type:"text",placeholder:"请输入accessToken"},domProps:{value:t.accessToken},on:{input:function(e){e.target.composing||(t.accessToken=e.target.value)}}}),n("button",{on:{click:t.handlerLogin}},[t._v("登录")])])]],2)},ra=[],ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo.loginname?n("div",{staticClass:"wu-user"},[n("nav-bar",{on:{leftClick:function(e){t.$router.go(-1)},rightClick:t.logout}},[t.my?t._e():n("icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t.my?n("span",{staticClass:"wu-user-logout",attrs:{slot:"right"},slot:"right"},[t._v("注销")]):t._e(),t._v("\n    "+t._s(t.my?t.my:"用户信息")+"\n  ")],1),n("div",{staticClass:"wu-user-container"},[n("div",{staticClass:"wu-user-container__header"},[n("img",{attrs:{src:t.userInfo.avatar_url,alt:""}}),n("div",{staticClass:"wu-user-container__header-info"},[n("div",{staticClass:"wu-user-container__header-nickname"},[t._v(t._s(t.userInfo.loginname))]),n("div",{staticClass:"wu-user-container__header-score"},[t._v(t._s(t.userInfo.score)+"积分")])]),n("span",{staticClass:"wu-user-container__header-time"},[t._v("注册时间"+t._s(t.ago(t.userInfo.create_at))+" ")])]),n("tabs",{model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tabs-item",{attrs:{id:"replies"}},[t._v("参与的话题")]),n("tabs-item",{attrs:{id:"topics"}},[t._v("发布的话题")]),n("tabs-item",{attrs:{id:"collect"}},[t._v("收藏")])],1),n("tab-container",{ref:"content",on:{scroll:t.handerScroll},model:{value:t.userTab,callback:function(e){t.userTab=e},expression:"userTab"}},[n("tab-container-item",{staticClass:"wu-user-replies",attrs:{id:"replies"}},[t._l(t.userInfo.recent_replies,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_replies.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),n("tab-container-item",{staticClass:"wu-user-topics",attrs:{id:"topics"}},[t._l(t.userInfo.recent_topics,function(t,e){return n("topics-item",{key:e,attrs:{topics:t}})}),t.userInfo.recent_topics.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1)],2),"collect"===t.userTab?n("tab-container-item",{attrs:{id:"collect"}},[t.userInfo.collect.length?t._e():n("div",{staticClass:"user__no-data"},[n("icon",{attrs:{type:"no-data"}})],1),t.userInfo.collect.length?n("div",{staticClass:"wu-user__collect"},t._l(t.userInfo.collect,function(e,a){return n("router-link",{key:a,attrs:{to:t.path.details(e.id)}},[n("topics-card",{attrs:{topics:e}})],1)})):t._e()]):t._e()],1)],1)],1):t._e()},la=[],pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:t.path.details(t.topics.id)}},[n("div",{staticClass:"wu-topics-item"},[n("div",{staticClass:"wu-topics-item__container"},[n("img",{attrs:{src:t.topics.author.avatar_url}}),n("div",{staticClass:"wu-topics-item__container__body"},[n("div",{staticClass:"wu-topics-item__container__body-title"},[t._v(t._s(t.topics.title))]),n("div",{staticClass:"wu-topics-item__container__body-author"},[t._v(t._s(t.topics.author.loginname)+"\n          "),n("span",{staticClass:"wu-topics-item__container__body-time"},[t._v(t._s(t.ago(t.topics.last_reply_at)))])])])])])])},da=[],ha=n("6f07"),ba=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type","function"===typeof(sa="undefined"!==typeof ha["RecentInfo"]&&ha["RecentInfo"])?sa:Object)],ba.prototype,"topics",void 0),ba=y["a"]([Object(O["a"])({mixins:[te],inject:["path"]})],ba);var fa=ba,va=fa,_a=(n("1cc0"),Object(k["a"])(va,pa,da,!1,null,null,null));_a.options.__file="index.vue";var ma,ga,ya=_a.exports,Oa=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.currentScrollTop=0,t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.userInfo.loginname,!t.t0){t.next=4;break}return t.next=4,this.getUserInfo(this.loginname);case 4:this.init(),this.$refs.content.$el.scrollTop=this.user.scroll;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"init",value:function(){this.$refs.content.$el.style.height="".concat(this.userContainerHeight(),"px")}},{key:"userContainerHeight",value:function(){var t=[".wu-navbar",".wu-user-container__header",".wu-tabs"],e=[".wu-user .wu-navbar",".wu-user-container__header",".wu-user .wu-tabs",".wu-tabbar"],n=this.my?Ce(e):Ce(t);return Se-n}},{key:"handerScroll",value:function(t){var e=t.srcElement,n=(e.clientHeight,e.scrollTop);e.scrollHeight;this.currentScrollTop=n}},{key:"destroyed",value:function(){this.updateUserScroll(this.currentScrollTop)}},{key:"userInfo",get:function(){var t=this;return this.users.filter(function(e){return e.loginname===t.loginname})[0]||{}}},{key:"userTab",get:function(){return this.user.tab},set:function(t){this.userTab!==t&&("collect"===t&&!this.userInfo.collect.length&&this.getUserCollect(this.loginname),this.changeUserTab(t))}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Oa.prototype,"loginname",void 0),y["a"]([Object(O["b"])(),y["b"]("design:type",String)],Oa.prototype,"my",void 0),y["a"]([Object(je["a"])(Un),y["b"]("design:type",Function)],Oa.prototype,"getUserInfo",void 0),y["a"]([Object(je["a"])(Hn),y["b"]("design:type",Function)],Oa.prototype,"changeUserTab",void 0),y["a"]([Object(je["a"])(Mn),y["b"]("design:type",Function)],Oa.prototype,"updateUserScroll",void 0),y["a"]([Object(je["a"])(Dn),y["b"]("design:type",Function)],Oa.prototype,"logout",void 0),y["a"]([Object(je["a"])(qn),y["b"]("design:type",Function)],Oa.prototype,"getUserCollect",void 0),y["a"]([Object(je["b"])(function(t){return t.user.users}),y["b"]("design:type","function"===typeof(ma="undefined"!==typeof Array&&Array)?ma:Object)],Oa.prototype,"users",void 0),y["a"]([Object(je["b"])(function(t){return t.user}),y["b"]("design:type","function"===typeof(ga="undefined"!==typeof ha["UserState"]&&ha["UserState"])?ga:Object)],Oa.prototype,"user",void 0),Oa=y["a"]([Object(O["a"])({components:{NavBar:Lt,Icon:lt,Tabs:Pt,TabsItem:Qt,TabContainer:_t,TabContainerItem:Tt,TopicsItem:ya,TopicsCard:be},mixins:[te],inject:["path"]})],Oa);var ja=Oa,wa=ja,Ta=(n("51b3"),Object(k["a"])(wa,ua,la,!1,null,null,null));Ta.options.__file="index.vue";var ka,Ca=Ta.exports,xa=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.accessToken="",t}return Object(_["a"])(e,[{key:"handlerLogin",value:function(){var t=this;this.accessToken?Rn(this.accessToken).then(function(e){return e.success&&t.userLogin(Object.assign({},e,{accessToken:t.accessToken,localToken:t.accessToken}))}):On.show("请输入用户令牌")}},{key:"mounted",value:function(){var t=this,e=this.user.localToken;!this.user.accessToken&&e&&Rn(e).then(function(n){return n.success&&t.userLogin(Object.assign({},n,{accessToken:e,localToken:e}))})}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(je["a"])(An),y["b"]("design:type",Function)],xa.prototype,"userLogin",void 0),y["a"]([Object(je["b"])(function(t){return t.user}),y["b"]("design:type","function"===typeof(ka="undefined"!==typeof ha["UserState"]&&ha["UserState"])?ka:Object)],xa.prototype,"user",void 0),xa=y["a"]([Object(O["a"])({components:{NavBar:Lt,User:Ca}})],xa);var Sa=xa,Ia=Sa,$a=(n("5442"),Object(k["a"])(Ia,oa,ra,!1,null,null,null));$a.options.__file="index.vue";var Ea,Ra=$a.exports,La=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-message"},[n("nav-bar",[t._v("消息中心")]),n("div",{staticClass:"wu-message-container"},[t.user.localToken?[t.user.message.length?t._e():n("div",{staticClass:"wu-message__no-data"},[n("icon",{attrs:{type:"no-data"}})],1),t._l(t.user.message,function(t,e){return n("message-item",{key:e,attrs:{message:t}})})]:[n("span",{staticClass:"wu-message-notLogin"},[t._v("请登录")])]],2)],1)},Na=[],Ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-messageItem"},[n("div",{staticClass:"wu-messageItem-container"},[n("img",{staticClass:"wu-messageItem-container-avatar",attrs:{src:t.message.author.avatar_url}}),n("div",{staticClass:"wu-messageItem-container-content"},[n("router-link",{attrs:{to:t.path.user(t.message.author.loginname)}},[n("span",[t._v(t._s(t.message.author.loginname))])]),t._v(" "+t._s("reply"===t.message.type?"回复了你的话题":"在话题")+"\n      "),n("router-link",{attrs:{to:t.path.details(t.message.topic.id)}},[n("span",[t._v(t._s(t.message.topic.title))])]),t._v(" "+t._s("at"===t.message.type?"中@了你":"")+"\n      "),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-messageItem-container-reply",domProps:{innerHTML:t._s(t.message.reply.content)}}),n("div",{staticClass:"wu-messageItem-container-time"},[t._v(t._s(t.ago(t.message.create_at)))])],1)])])},Ha=[],Ma=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type","function"===typeof(Ea="undefined"!==typeof ha["MessageInfo"]&&ha["MessageInfo"])?Ea:Object)],Ma.prototype,"message",void 0),Ma=y["a"]([Object(O["a"])({mixins:[te],inject:["path"]})],Ma);var Aa=Ma,Da=Aa,Pa=(n("8331"),Object(k["a"])(Da,Ua,Ha,!1,null,null,null));Pa.options.__file="message-item.vue";var qa,Ba=Pa.exports,Fa=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(_["a"])(e,[{key:"mounted",value:function(){this.init()}},{key:"init",value:function(){var t=Se-Ce([".wu-message .wu-navbar",".wu-tabbar"]);xe(".wu-message-container","style","height:".concat(t,"px"));var e=this.user.localToken||this.user.accessToken;e&&!this.user.message.length&&this.getMessage(e),e&&this.user.message.length&&Nn()}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(je["b"])(function(t){return t.user}),y["b"]("design:type","function"===typeof(qa="undefined"!==typeof ha["UserState"]&&ha["UserState"])?qa:Object)],Fa.prototype,"user",void 0),y["a"]([Object(je["a"])(Pn),y["b"]("design:type",Function)],Fa.prototype,"getMessage",void 0),Fa=y["a"]([Object(O["a"])({components:{NavBar:Lt,Icon:lt,MessageItem:Ba}})],Fa);var Ga=Fa,Xa=Ga,Wa=(n("16c5"),Object(k["a"])(Xa,La,Na,!1,null,null,null));Wa.options.__file="index.vue";var Ja=Wa.exports,Qa=[{id:"home",value:"首页"},{id:"edit",value:"发布"},{id:"message",value:"消息"},{id:"user",value:"我的"}],Va=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.tabbars=Qa,t}return Object(_["a"])(e,[{key:"tabbar",get:function(){return this._tabbar},set:function(t){this.tabbar!==t&&this.changeTabBar(t)}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(je["a"])(me),y["b"]("design:type",Function)],Va.prototype,"changeTabBar",void 0),y["a"]([Object(je["b"])(function(t){return t.topics.tabbar}),y["b"]("design:type",String)],Va.prototype,"_tabbar",void 0),Va=y["a"]([Object(O["a"])({components:{TabBar:J,TabBarTab:nt,Icon:lt,TabContainer:_t,TabContainerItem:Tt,Edit:ca,Login:Ra,Message:Ja,Home:Ne},inject:["path"]})],Va);var Ya=Va,za=Ya,Ka=Object(k["a"])(za,A,D,!1,null,null,null);Ka.options.__file="index.vue";var Za,ti=Ka.exports,ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.details.author?n("div",{staticClass:"wu-topics-details"},[n("nav-bar",{staticClass:"wu-topics-details__navbar",on:{leftClick:function(e){t.$router.go(-1)}}},[n("Icon",{attrs:{slot:"left",type:"left"},slot:"left"}),t._v("主题详情\n  ")],1),n("div",{ref:"details",staticClass:"wu-topics-details__container",on:{scroll:t.handlerScroll}},[n("div",{staticClass:"wu-topics-details__title"},[t._v(t._s(t.details.title))]),n("div",{staticClass:"wu-topics-details__header"},[n("img",{staticClass:"wu-topics-details__header-avatar",attrs:{src:t.details.author.avatar_url,alt:"avatar"}}),n("span",{staticClass:"wu-topics-details__header-nickname"},[n("router-link",{attrs:{to:t.path.user(t.details.author.loginname)}},[t._v(t._s(t.details.author.loginname))])],1),n("span",{staticClass:"wu-topics-details__header-text"},[t._v(t._s("发布于"+t.ago(t.details.create_at)))])]),n("div",{staticClass:"wu-topics-details__body"},[n("div",{staticClass:"wu-topics-details__body-left"},[n("span",[t._v("阅读数："+t._s(t.details.visit_count))]),n("span",[t._v("回复数："+t._s(t.details.reply_count))])]),n("span",{class:t.collectCls,on:{click:t.handlerCollect}},[t._v(t._s(t.details.is_collect?"取消收藏":"收藏"))])]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"wu-topics-details__content",domProps:{innerHTML:t._s(t.details.content)}}),n("div",{staticClass:"wu-topics-details__replies"},[t.user.accessToken||t.user.localToken?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{maxlength:"150",placeholder:"我来说一句"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),n("div",{staticClass:"wu-topics-details-submit"},[n("span",{on:{click:t.handlerSubmit}},[t._v("评论")])])]):n("div",{staticClass:"wu-topics-details__notLogin"},[t._v("\n        请登录后再来评论\n      ")])]),t.replies.length?n("replies",{attrs:{replies:t.replies}}):n("div",{staticClass:"wu-topics-details__notReplies"},[t._v("\n      还没有评论，快来抢沙发\n    ")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:function(e){t.$refs.details.scrollTop=0}}})],1):t._e()},ni=[],ai=n("c93e"),ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wu-topic-details-comment"},[n("div",{staticClass:"wu-topic-details-comment__header"},[t._v("共有"+t._s(t.replies.length)+"条留言")]),t._l(t.replies,function(e,a){return n("replie",{key:a,attrs:{replie:e}},[t._v(t._s(a+1))])})],2)},si=[],ci=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card",{staticClass:"wu-topic-details__replie"},[n("div",{staticClass:"wu-topic-details__replie__header",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"wu-topic-details__replie-avatar",attrs:{src:t.replie.author.avatar_url}}),n("span",{staticClass:"wu-topic-details__replie-nickname"},[n("router-link",{attrs:{to:t.path.user(t.replie.author.loginname)}},[t._v(t._s(t.replie.author.loginname))])],1),t.replie.is_author?n("span",{staticClass:"wu-topic-details__replie-author"},[t._v("作者")]):t._e(),n("span",{staticClass:"wu-topic-details__replie-floor"},[t._t("default"),t._v("楼")],2)]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{slot:"body"},domProps:{innerHTML:t._s(t.replie.content)},slot:"body"}),n("div",{staticClass:"wu-topic-details__replie__footer",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"wu-topic-details__replie-time"},[t._v(t._s(t.ago(t.replie.create_at)))]),t.replie.ups.length?n("span",{staticClass:"wu-topic-details__replie-uped"},[n("icon",{attrs:{type:"like"}}),t._v(t._s(t.replie.ups.length)+"\n    ")],1):t._e()])])},oi=[],ri=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type","function"===typeof(Za="undefined"!==typeof zt["RepliesInfo"]&&zt["RepliesInfo"])?Za:Object)],ri.prototype,"replie",void 0),ri=y["a"]([Object(O["a"])({components:{Card:re,Icon:lt},mixins:[te],inject:["path"]})],ri);var ui=ri,li=ui,pi=(n("7ea8"),Object(k["a"])(li,ci,oi,!1,null,null,null));pi.options.__file="replie.vue";var di,hi=pi.exports,bi=function(t){function e(){return Object(h["a"])(this,e),Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type","function"===typeof(di="undefined"!==typeof Array&&Array)?di:Object)],bi.prototype,"replies",void 0),bi=y["a"]([Object(O["a"])({components:{Replie:hi}})],bi);var fi=bi,vi=fi,_i=(n("8a8f"),Object(k["a"])(vi,ii,si,!1,null,null,null));_i.options.__file="index.vue";var mi,gi,yi=_i.exports,Oi="wu-topics-details",ji=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(m["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.scroll=0,t.showTop=!1,t.comment="",t}return Object(_["a"])(e,[{key:"mounted",value:function(){var t=Object(wn["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=!this.details.author,!t.t0){t.next=4;break}return t.next=4,this.getTopicDetails(this.topic);case 4:this.details.scroll>200&&(this.showTop=!0),e=Se-ke(".wu-navbar","clientHeight"),xe(".".concat(Oi,"__container"),"style","height:".concat(e,"px")),this.$refs.details.scrollTop=this.details.scroll;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handlerScroll",value:function(t){var e=t.srcElement.scrollTop;this.scroll=e,this.showTop=e>200}},{key:"handlerCollect",value:function(){var t=this;this.user.localToken?this.collect().then(function(e){t.changeCollect({topic:t.topic,result:e})}):On.show("请登录")}},{key:"collect",value:function(){var t=this.user.accessToken,e=this.details.id,n={accesstoken:t,topic_id:e};return this.details.is_collect?En(n):$n(n)}},{key:"handlerSubmit",value:function(){var t=this,e=this.comment,n=this.topic,a=this.getTopicDetails;e?ta({content:e,topic_id:n}).then(function(){var e=Object(wn["a"])(regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i.success&&On.show("评论成功"),t.comment="",e.next=4,a(n);case 4:t.$refs.details.scrollTop=t.$refs.details.scrollHeight;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):On.show("评论内容不能为空")}},{key:"beforeDestroy",value:function(){var t=this.topic,e=this.scroll;this.setTopicScroll({id:t,scroll:e})}},{key:"details",get:function(){var t=this;return this.openTopics.filter(function(e){return e.id===t.topic})[0]||{}}},{key:"replies",get:function(){var t=this;return this.details.replies.reduce(function(e,n){return t.details.author.loginname===n.author.loginname?e.push(Object(ai["a"])({is_author:!0},n)):e.push(n),e},[])}},{key:"collectCls",get:function(){return["".concat(Oi,"__body-collect"),Object(Y["a"])({},"".concat(Oi,"__body-cancelCollect"),this.details.is_collect)]}}]),Object(v["a"])(e,t),e}(O["c"]);y["a"]([Object(O["b"])(),y["b"]("design:type",String)],ji.prototype,"topic",void 0),y["a"]([Object(je["b"])(function(t){return t.topics.openTopics}),y["b"]("design:type","function"===typeof(mi="undefined"!==typeof Array&&Array)?mi:Object)],ji.prototype,"openTopics",void 0),y["a"]([Object(je["b"])(function(t){return t.user}),y["b"]("design:type","function"===typeof(gi="undefined"!==typeof ha["UserState"]&&ha["UserState"])?gi:Object)],ji.prototype,"user",void 0),y["a"]([Object(je["a"])(ve),y["b"]("design:type",Function)],ji.prototype,"getTopicDetails",void 0),y["a"]([Object(je["a"])(ye),y["b"]("design:type",Function)],ji.prototype,"setTopicScroll",void 0),y["a"]([Object(je["a"])(Oe),y["b"]("design:type",Function)],ji.prototype,"changeCollect",void 0),ji=y["a"]([Object(O["a"])({components:{NavBar:Lt,Icon:lt,Replies:yi},mixins:[te],inject:["path"]})],ji);var wi=ji,Ti=wi,ki=(n("6aec"),Object(k["a"])(Ti,ei,ni,!1,null,null,null));ki.options.__file="index.vue";var Ci=ki.exports;c["default"].use(M["a"]);var xi=new M["a"]({routes:[{path:"/",name:"Home",component:ti},{path:"/details/:topic",name:"topicDetails",component:Ci,props:!0},{path:"/user/:loginname",name:"user",component:Ca,props:!0}]}),Si=(n("f5df"),n("26e2"),function(){return"/"}),Ii=function(t){return"/details/".concat(t)},$i=function(t){return"/user/".concat(t)},Ei=function(){return"/edit"};c["default"].config.productionTip=!1,new c["default"]({el:"#app",router:xi,store:Wn,render:function(t){return t(H)},provide:{path:s}})},da3a:function(t,e,n){},dacc:function(t,e,n){},dee0:function(t,e,n){},e0e8:function(t,e,n){"use strict";var a=n("2d9f"),i=n.n(a);i.a},e8e8:function(t,e){},f66a:function(t,e,n){},ffad:function(t,e,n){}});
//# sourceMappingURL=app.f2176d37.js.map